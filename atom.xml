<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>leadscloud</title>
  
  <subtitle>Google SEO|外贸营销推广</subtitle>
  <link href="https://leadscloud.github.io/atom.xml" rel="self"/>
  
  <link href="https://leadscloud.github.io/"/>
  <updated>2025-04-10T04:42:07.145Z</updated>
  <id>https://leadscloud.github.io/</id>
  
  <author>
    <name>Ray</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>VirtualBox中恢复腾讯云服务器镜像</title>
    <link href="https://leadscloud.github.io/20241027/virtualbox-restore-tencent-centos-mirror/"/>
    <id>https://leadscloud.github.io/20241027/virtualbox-restore-tencent-centos-mirror/</id>
    <published>2024-10-26T17:38:01.000Z</published>
    <updated>2025-04-10T04:42:07.145Z</updated>
    
    <content type="html"><![CDATA[<p>记录一次腾讯云镜像在本地恢复的过程</p><p>由于遇到一些限制原因导致出现了诸多错误，无法顺利恢复，不过最终经过多次尝试，终于恢复成功，特记录一下。</p><h3 id="腾讯云被封，无法远程ssh连接"><a href="#腾讯云被封，无法远程ssh连接" class="headerlink" title="腾讯云被封，无法远程ssh连接"></a>腾讯云被封，无法远程ssh连接</h3><p>虽然无法访问服务器，但通过网页仍可以访问，但由于所有网络都断了，不可能下载大量数据了，想到了创建镜像然后导出到本地的操作</p><p>腾讯云创建镜像导出本地，需要先创建一个存储桶（第一次开通免费，个人50G,企业1T），并且流量是收费的，为了下载这个镜像不得不付钱搞定，整个流程到这还比较快。</p><h3 id="无法正常恢复"><a href="#无法正常恢复" class="headerlink" title="无法正常恢复"></a>无法正常恢复</h3><p>镜像下载的为<code>.vmdk</code>镜像，下载到本地后，导入virtualbox，开机启动，出现错误 <code>warning: /dev/vda1 does not exist</code></p><p>虚拟机创建时，选择不添加虚拟硬盘，创建完成后在设置中（选择存储，在控制器那里添加硬盘）附加镜像即可</p><p>在vnc里用<code>ls /dev</code>查看设备信息显示的结果中并不存在<code>/dev/vda1</code>，存在<code>/vda/sda1</code></p><p>如果<code>/vda/sda1</code>也不存在，看看你的虚拟机是不是硬盘设置中位置没有放到 SATA端口0 的位置。</p><p>通过以下办法可以启动</p><p>进入VPS服务商提供的VNC后台界面,执行下面语句</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">mount /dev/sda1 /tmp</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">sed -i ‘s/vda/sda/g’ /tmp/etc/fstab</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">sed -i ‘s/vda/sda/g’ /tmp/boot/grub2/grub.cfg</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">reboot</span></span><br></pre></td></tr></table></figure><p>当然，如果你更改虚拟机有时默认是正常的，那就最好不过了。原因就是虚拟机中的硬盘是sda1 但镜像中保存的是原始数据 vda1，启动时无法找到相应硬盘。</p><h3 id="centos7-root密码恢复"><a href="#centos7-root密码恢复" class="headerlink" title="centos7 root密码恢复"></a>centos7 root密码恢复</h3><ul><li>开机按下<code>Ecs</code>键，进入启动界面</li><li>根据需要选择系统内核版本并按<code>e</code>键</li><li>光标移动到 <code>linux 16</code> 开头的行，找到 <code>ro</code> 改为 <code>rw init=sysroot/bin/sh </code></li><li>按 <code>Ctrl+x</code> 执行</li><li>进入如下界面后输入<code>chroot /sysroot</code></li><li>输入<code>passwd</code>根据提示输入两次新密码 </li><li>完成后输入 <code>touch /.autorelabel</code> 更新系统信息</li><li>键入 <code>exit</code> 退出 </li><li>然后使用<code>reboot</code>命令重启</li></ul><h3 id="postgresql的恢复"><a href="#postgresql的恢复" class="headerlink" title="postgresql的恢复"></a>postgresql的恢复</h3><p>我主要为了恢复这个数据库，但在本地启动后无法成功启动应用，只能新建一个同样版本的Centos7，然后把数据库data目录复制过去，启动成功。</p><p>流程如下：</p><ul><li><p>下载镜像 <a href="https://mirrors.aliyun.com/centos/7.9.2009/isos/x86_64/CentOS-7-x86_64-DVD-2009.iso">https://mirrors.aliyun.com/centos/7.9.2009/isos/x86_64/CentOS-7-x86_64-DVD-2009.iso</a></p></li><li><p>新建虚拟机 配置相关参数，启动安装</p></li><li><p>安装过程中都保持默认即可，但网络这块点击选择下启用，第一次安装后，无法连网导致我重新安装一次</p></li><li><p>安装中设置用户名和密码</p></li><li><p>进入系统后操作</p></li><li><p>修改更新源 <code>vi /etc/yum.repos.d/CentOS-Base.repo</code></p></li></ul><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[extras]</span></span><br><span class="line"><span class="attr">gpgcheck</span>=<span class="number">1</span></span><br><span class="line"><span class="attr">gpgkey</span>=http://mirrors.tencentyun.com/centos/RPM-GPG-KEY-CentOS-<span class="number">7</span></span><br><span class="line"><span class="attr">enabled</span>=<span class="number">1</span></span><br><span class="line"><span class="attr">baseurl</span>=http://mirrors.tencentyun.com/centos/<span class="variable">$releasever</span>/extras/<span class="variable">$basearch</span>/</span><br><span class="line"><span class="attr">name</span>=Qcloud centos extras - <span class="variable">$basearch</span></span><br><span class="line"><span class="section">[os]</span></span><br><span class="line"><span class="attr">gpgcheck</span>=<span class="number">1</span></span><br><span class="line"><span class="attr">gpgkey</span>=http://mirrors.tencentyun.com/centos/RPM-GPG-KEY-CentOS-<span class="number">7</span></span><br><span class="line"><span class="attr">enabled</span>=<span class="number">1</span></span><br><span class="line"><span class="attr">baseurl</span>=http://mirrors.tencentyun.com/centos/<span class="variable">$releasever</span>/os/<span class="variable">$basearch</span>/</span><br><span class="line"><span class="attr">name</span>=Qcloud centos os - <span class="variable">$basearch</span></span><br><span class="line"><span class="section">[updates]</span></span><br><span class="line"><span class="attr">gpgcheck</span>=<span class="number">1</span></span><br><span class="line"><span class="attr">gpgkey</span>=http://mirrors.tencentyun.com/centos/RPM-GPG-KEY-CentOS-<span class="number">7</span></span><br><span class="line"><span class="attr">enabled</span>=<span class="number">1</span></span><br><span class="line"><span class="attr">baseurl</span>=http://mirrors.tencentyun.com/centos/<span class="variable">$releasever</span>/updates/<span class="variable">$basearch</span>/</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">yum update</span><br><span class="line">yum install net-tools wget -y</span><br><span class="line"></span><br><span class="line">yum install yum-fastestmirror</span><br><span class="line">yum clean all</span><br><span class="line"></span><br><span class="line">yum install -y https:<span class="regexp">//</span>download.postgresql.org<span class="regexp">/pub/</span>repos<span class="regexp">/yum/</span>reporpms<span class="regexp">/EL-7-x86_64/</span>pgdg-redhat-repo-latest.noarch.rpm</span><br><span class="line">yum update</span><br><span class="line"></span><br><span class="line">yum install -y postgresql15-server</span><br><span class="line"></span><br><span class="line"><span class="comment"># 如果提示 `libzstd版本不对问题`</span></span><br><span class="line">yum install libzstd*</span><br><span class="line">yum install epel-release.noarch -y</span><br><span class="line">yum install libzstd.x86_64 -y</span><br><span class="line"></span><br><span class="line"><span class="regexp">/usr/</span>pgsql-<span class="number">15</span><span class="regexp">/bin/</span>postgresql-<span class="number">15</span>-setup initdb</span><br><span class="line">systemctl start postgresql-<span class="number">15</span></span><br><span class="line">systemctl status postgresql-<span class="number">15</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">远程数据同步到本地 </span><br><span class="line"></span><br><span class="line">`rsync -a -e <span class="string">&quot;ssh -p xxxx&quot;</span> root@<span class="number">192.168</span>.<span class="number">56.1</span>:<span class="regexp">/root/</span>data<span class="regexp">/ /</span>var<span class="regexp">/lib/</span>pgsql<span class="regexp">/15/</span>data/`</span><br><span class="line"></span><br><span class="line">cp -p data-origin<span class="regexp">/postgresql.conf data/</span></span><br><span class="line"></span><br><span class="line">systemctl start postgresql-<span class="number">15</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;记录一次腾讯云镜像在本地恢复的过程&lt;/p&gt;
&lt;p&gt;由于遇到一些限制原因导致出现了诸多错误，无法顺利恢复，不过最终经过多次尝试，终于恢复成功，特记录一下。&lt;/p&gt;
&lt;h3 id=&quot;腾讯云被封，无法远程ssh连接&quot;&gt;&lt;a href=&quot;#腾讯云被封，无法远程ssh连接&quot; clas</summary>
      
    
    
    
    <category term="技术" scheme="https://leadscloud.github.io/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
    <category term="腾讯云" scheme="https://leadscloud.github.io/tags/%E8%85%BE%E8%AE%AF%E4%BA%91/"/>
    
    <category term="镜像恢复" scheme="https://leadscloud.github.io/tags/%E9%95%9C%E5%83%8F%E6%81%A2%E5%A4%8D/"/>
    
  </entry>
  
  <entry>
    <title>curl常用命令</title>
    <link href="https://leadscloud.github.io/20230606/curl-common-commands/"/>
    <id>https://leadscloud.github.io/20230606/curl-common-commands/</id>
    <published>2023-06-06T03:43:53.000Z</published>
    <updated>2025-04-10T04:42:07.134Z</updated>
    
    <content type="html"><![CDATA[<p>网站使用cloudflare时，无法得到真正的ip，如果知道域名的ip，一般使用下面的命令探测</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">curl</span> -v -H <span class="string">&quot;Host: leadscloud.xyz&quot;</span> <span class="number">167</span>.<span class="number">172</span>.xx.xx</span><br></pre></td></tr></table></figure><h3 id="CURL重定向"><a href="#CURL重定向" class="headerlink" title="CURL重定向"></a>CURL重定向</h3><p>通过-L选项进行重定向 默认情况下CURL不会发送HTTP Location headers(重定向).当一个被请求页面移动到另一个站点时，会发送一个HTTP Loaction header作为请求，然后将请求重定向到新的地址上。</p><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"># 让curl使用地址重定向，此时会查询google.com.hk站点</span></span><br><span class="line">curl <span class="punctuation">-</span>L http<span class="punctuation">:</span><span class="comment">//www.google.com</span></span><br></pre></td></tr></table></figure><h3 id="下载单个文件，默认将输出打印到标准输出中-STDOUT-中"><a href="#下载单个文件，默认将输出打印到标准输出中-STDOUT-中" class="headerlink" title="下载单个文件，默认将输出打印到标准输出中(STDOUT)中"></a>下载单个文件，默认将输出打印到标准输出中(STDOUT)中</h3><pre><code>curl http://www.centos.org</code></pre><h3 id="通过-o-O选项保存下载的文件到指定的文件中："><a href="#通过-o-O选项保存下载的文件到指定的文件中：" class="headerlink" title="通过-o&#x2F;-O选项保存下载的文件到指定的文件中："></a>通过-o&#x2F;-O选项保存下载的文件到指定的文件中：</h3><blockquote><ol><li>-o：将文件保存为命令行中指定的文件名的文件中</li><li>-O：使用URL中默认的文件名保存文件到本地</li></ol></blockquote><pre><code># 将文件下载到本地并命名为mygettext.html  curl -o mygettext.html http://www.gnu.org/software/gettext/manual/gettext.html # 将文件保存到本地并命名为gettext.html  curl -O http://www.gnu.org/software/gettext/manual/gettext.html</code></pre><p>同样可以使用转向字符”&gt;”对输出进行转向输出</p><h3 id="同时获取多个文件"><a href="#同时获取多个文件" class="headerlink" title="同时获取多个文件"></a>同时获取多个文件</h3><pre><code>curl -O URL1 -O URL2</code></pre><p>若同时从同一站点下载多个文件时，curl会尝试重用链接(connection)。</p><h3 id="断点续传"><a href="#断点续传" class="headerlink" title="断点续传"></a>断点续传</h3><p>通过使用-C选项可对大文件使用断点续传功能，如：</p><pre><code># 当文件在下载完成之前结束该进程$ curl -O http://www.gnu.org/software/gettext/manual/gettext.html##############             20.1%# 通过添加-C选项继续对该文件进行下载，已经下载过的文件不会被重新下载curl -C - -O http://www.gnu.org/software/gettext/manual/gettext.html###############            21.1%</code></pre><h3 id="CURL授权"><a href="#CURL授权" class="headerlink" title="CURL授权"></a>CURL授权</h3><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">curl -u username:password <span class="built_in">URL</span></span><br><span class="line"> </span><br><span class="line"><span class="comment"># 通常的做法是在命令行只输入用户名，之后会提示输入密码，这样可以保证在查看历史记录时不会将密码泄露</span></span><br><span class="line">curl -u username <span class="built_in">URL</span></span><br></pre></td></tr></table></figure><h3 id="上传文件到FTP服务器"><a href="#上传文件到FTP服务器" class="headerlink" title="上传文件到FTP服务器"></a>上传文件到FTP服务器</h3><p>通过 -T 选项可将指定的本地文件上传到FTP服务器上</p><pre><code># 将myfile.txt文件上传到服务器curl -u ftpuser:ftppass -T myfile.txt ftp://ftp.testserver.com# 同时上传多个文件curl -u ftpuser:ftppass -T &quot;&#123;file1,file2&#125;&quot; ftp://ftp.testserver.com# 从标准输入获取内容保存到服务器指定的文件中curl -u ftpuser:ftppass -T - ftp://ftp.testserver.com/myfile_1.txt</code></pre><h3 id="为CURL设置代理"><a href="#为CURL设置代理" class="headerlink" title="为CURL设置代理"></a>为CURL设置代理</h3><p>x 选项可以为CURL添加代理功能</p><pre><code> # 指定代理主机和端口 curl -x proxysever.test.com:3128 http://google.co.in</code></pre><h3 id="保存与使用网站cookie信息"><a href="#保存与使用网站cookie信息" class="headerlink" title="保存与使用网站cookie信息"></a>保存与使用网站cookie信息</h3><pre><code> # 将网站的cookies信息保存到sugarcookies文件中 curl -D sugarcookies http://localhost/sugarcrm/index.php  # 使用上次保存的cookie信息 curl -b sugarcookies http://localhost/sugarcrm/index.php</code></pre><h3 id="设置user-agent"><a href="#设置user-agent" class="headerlink" title="设置user-agent"></a>设置user-agent</h3><p><code>-A</code>参数指定客户端的用户代理标头，即<code>User-Agent</code>。curl的默认用户代理字符串是<code>curl/[version]</code>。</p><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ curl <span class="punctuation">-</span>A &#x27;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/76.0.<span class="number">3809.10</span>0 Safari/537.36&#x27; https<span class="punctuation">:</span><span class="comment">//google.com</span></span><br></pre></td></tr></table></figure><p>也可以通过<code>-H</code>参数直接指定标头，更改<code>User-Agent</code>。</p><pre><code>curl -H &#39;User-Agent: php/1.0&#39; https://google.com</code></pre><h3 id="传递请求数据"><a href="#传递请求数据" class="headerlink" title="传递请求数据"></a>传递请求数据</h3><p>默认curl使用GET方式请求数据，这种方式下直接通过URL传递数据<br>可以通过 –data&#x2F;-d 方式指定使用POST方式传递数据</p><pre><code># GETcurl -u username https://api.github.com/user?access_token=XXXXXXXXXX# POSTcurl -u username --data &quot;param1=value1&amp;param2=value&quot; https://api.github.com# 也可以指定一个文件，将该文件中的内容当作数据传递给服务器端curl --data @filename https://github.api.com/authorizations</code></pre><p>注：默认情况下，通过POST方式传递过去的数据中若有特殊字符，首先需要将特殊字符转义在传递给服务器端，如value值中包含有空格，则需要先将空格转换成%20，如：</p><pre><code>curl -d &quot;value%201&quot; http://hostname.com</code></pre><p>在新版本的CURL中，提供了新的选项 –data-urlencode，通过该选项提供的参数会自动转义特殊字符。</p><pre><code>curl --data-urlencode &quot;value 1&quot; http://hostname.com</code></pre><p>除了使用GET和POST协议外，还可以通过 -X 选项指定其它协议，如：</p><pre><code>curl -I -X DELETE https://api.github.cim</code></pre><p>上传文件</p><pre><code>curl --form &quot;fileupload=@filename.txt&quot; http://hostname/resource</code></pre><h3 id="获取更多信息"><a href="#获取更多信息" class="headerlink" title="获取更多信息"></a>获取更多信息</h3><p>通过使用 -v 和 -trace获取更多的链接信息</p><h3 id="显示头信息"><a href="#显示头信息" class="headerlink" title="显示头信息"></a>显示头信息</h3><ul><li><code>-i</code> 参数：可以显示http response 的头信息，连同网页代码一起。</li><li><code>-I</code> 参数：则只显示http response 的头信息, 不显示网页源码。 同 –head</li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;网站使用cloudflare时，无法得到真正的ip，如果知道域名的ip，一般使用下面的命令探测&lt;/p&gt;
&lt;figure class=&quot;highlight apache&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line</summary>
      
    
    
    
    <category term="技术" scheme="https://leadscloud.github.io/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
    <category term="curl" scheme="https://leadscloud.github.io/tags/curl/"/>
    
  </entry>
  
  <entry>
    <title>node /lib64/libm.so.6 version GLIBC_2.27 not found</title>
    <link href="https://leadscloud.github.io/20230421/install-node-libm-so-6-version-GLIBC-2-27-not-found/"/>
    <id>https://leadscloud.github.io/20230421/install-node-libm-so-6-version-GLIBC-2-27-not-found/</id>
    <published>2023-04-21T05:51:21.000Z</published>
    <updated>2025-04-10T04:42:07.138Z</updated>
    
    <content type="html"><![CDATA[<p>centos7服务器升级node 20后 <code>n latest</code>，出现以下问题</p><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">node</span><span class="title">: /lib64</span>/libm.so.<span class="number">6</span>: <span class="keyword">version</span> `GLIBC_2.<span class="number">27</span>&#x27; not found (required by <span class="keyword">node</span><span class="title">)</span></span><br><span class="line"><span class="title">node</span>: /lib64/libc.so.<span class="number">6</span>: <span class="keyword">version</span> `GLIBC_2.<span class="number">25</span>&#x27; not found (required by <span class="keyword">node</span><span class="title">)</span></span><br><span class="line"><span class="title">node</span>: /lib64/libc.so.<span class="number">6</span>: <span class="keyword">version</span> `GLIBC_2.<span class="number">28</span>&#x27; not found (required by <span class="keyword">node</span><span class="title">)</span></span><br><span class="line"><span class="title">node</span>: /lib64/libstdc++.so.<span class="number">6</span>: <span class="keyword">version</span> `CXXABI_1.<span class="number">3.9</span>&#x27; not found (required by <span class="keyword">node</span><span class="title">)</span></span><br><span class="line"><span class="title">node</span>: /lib64/libstdc++.so.<span class="number">6</span>: <span class="keyword">version</span> `GLIBCXX_3.<span class="number">4.20</span>&#x27; not found (required by <span class="keyword">node</span><span class="title">)</span></span><br><span class="line"><span class="title">node</span>: /lib64/libstdc++.so.<span class="number">6</span>: <span class="keyword">version</span> `GLIBCXX_3.<span class="number">4.21</span>&#x27; not found (required by <span class="keyword">node</span><span class="title">)</span></span><br></pre></td></tr></table></figure><p>明显是GLIBC_2.27支持问题</p><h3 id="更新glibc"><a href="#更新glibc" class="headerlink" title="更新glibc"></a>更新glibc</h3><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">wget http:<span class="string">//ftp.gnu.org/gnu/glibc/glibc-2.28.tar.gz</span></span><br><span class="line">tar xf glibc-2.28.tar.gz </span><br><span class="line"><span class="keyword">cd</span> glibc-2.28/ &amp;&amp; mkdir build  &amp;&amp; <span class="keyword">cd</span> build</span><br><span class="line"><span class="string">../configure</span> <span class="params">--prefix=/usr</span> <span class="params">--disable-profile</span> <span class="params">--enable-add-ons</span> <span class="params">--with-headers=/usr/include</span> <span class="params">--with-binutils=/usr/bin</span></span><br></pre></td></tr></table></figure><p><strong>在这之前一般都要升级gcc和make,否则在configure时会出现下面错误</strong></p><figure class="highlight gams"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">configure: error: </span><br><span class="line"><span class="comment">*** These critical programs are missing or too old: make bison compiler</span></span><br><span class="line"><span class="comment">*** Check the INSTALL file for required versions.</span></span><br></pre></td></tr></table></figure><h3 id="升级GCC和make"><a href="#升级GCC和make" class="headerlink" title="升级GCC和make"></a>升级GCC和make</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 升级GCC(默认为4 升级为8)</span></span><br><span class="line">yum install -y centos-release-scl</span><br><span class="line">yum install -y devtoolset-8-gcc*</span><br><span class="line"><span class="built_in">mv</span> /usr/bin/gcc /usr/bin/gcc-4.8.5</span><br><span class="line"><span class="built_in">ln</span> -s /opt/rh/devtoolset-8/root/bin/gcc /usr/bin/gcc</span><br><span class="line"><span class="built_in">mv</span> /usr/bin/g++ /usr/bin/g++-4.8.5</span><br><span class="line"><span class="built_in">ln</span> -s /opt/rh/devtoolset-8/root/bin/g++ /usr/bin/g++</span><br><span class="line"></span><br><span class="line"><span class="comment"># 升级 make(默认为3 升级为4)</span></span><br><span class="line">wget http://ftp.gnu.org/gnu/make/make-4.3.tar.gz</span><br><span class="line">tar -xzvf make-4.3.tar.gz &amp;&amp; <span class="built_in">cd</span> make-4.3/</span><br><span class="line">./configure  --prefix=/usr/local/make</span><br><span class="line">make &amp;&amp; make install</span><br><span class="line"><span class="built_in">cd</span> /usr/bin/ &amp;&amp; <span class="built_in">mv</span> make make.bak</span><br><span class="line"><span class="built_in">ln</span> -sv /usr/local/make/bin/make /usr/bin/make</span><br></pre></td></tr></table></figure><p>如果提示 <code> These critical programs are missing or too old: bison</code> 升级或安装下bison</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum <span class="keyword">install</span> -y bison</span><br></pre></td></tr></table></figure><h3 id="继续安装glibc"><a href="#继续安装glibc" class="headerlink" title="继续安装glibc"></a>继续安装glibc</h3><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">cd</span> <span class="string">/root/glibc-2.28/build</span></span><br><span class="line"><span class="string">../configure</span> <span class="params">--prefix=/usr</span> <span class="params">--disable-profile</span> <span class="params">--enable-add-ons</span> <span class="params">--with-headers=/usr/include</span> <span class="params">--with-binutils=/usr/bin</span></span><br><span class="line"></span><br><span class="line">make &amp;&amp; make install</span><br></pre></td></tr></table></figure><h3 id="如果出现错误"><a href="#如果出现错误" class="headerlink" title="如果出现错误"></a>如果出现错误</h3><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="regexp">/usr/</span>bin/ld: cannot <span class="keyword">find</span> -lnss_test2</span><br></pre></td></tr></table></figure><p>请修改<code>scripts/test-installation.pl</code>，新增如下内容 128行左右</p><figure class="highlight gams"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&amp;&amp; <span class="symbol">$</span>name <span class="keyword">ne</span> <span class="string">&quot;nss_test1&quot;</span> </span><br></pre></td></tr></table></figure><p>改为 </p><figure class="highlight gams"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&amp;&amp; <span class="symbol">$</span>name <span class="keyword">ne</span> <span class="string">&quot;nss_test1&quot;</span> &amp;&amp; <span class="symbol">$</span>name <span class="keyword">ne</span> <span class="string">&quot;nss_test2&quot;</span></span><br></pre></td></tr></table></figure><p>如果报错</p><figure class="highlight livescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="regexp">/lib/</span>../lib64/libnss_nis.so: <span class="literal">undefined</span> reference <span class="keyword">to</span> `_nsl_default_nss@GLIBC_PRIVATE<span class="string">&#x27;</span></span><br></pre></td></tr></table></figure><p>请加–enable-obsolete-nsl</p><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">../configure</span> <span class="params">--prefix=/usr</span> <span class="params">--disable-profile</span> <span class="params">--enable-add-ons</span> <span class="params">--with-headers=/usr/include</span> <span class="params">--with-binutils=/usr/bin</span> <span class="params">--enable-obsolete-nsl</span></span><br></pre></td></tr></table></figure><p>如果还是出现 </p><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">node</span><span class="title">: /lib64</span>/libstdc++.so.<span class="number">6</span>: <span class="keyword">version</span> `GLIBCXX_3.<span class="number">4.20</span>&#x27; not found (required by <span class="keyword">node</span><span class="title">)</span></span><br><span class="line"><span class="title">node</span>: /lib64/libstdc++.so.<span class="number">6</span>: <span class="keyword">version</span> `CXXABI_1.<span class="number">3.9</span>&#x27; not found (required by <span class="keyword">node</span><span class="title">)</span></span><br><span class="line"><span class="title">node</span>: /lib64/libstdc++.so.<span class="number">6</span>: <span class="keyword">version</span> `GLIBCXX_3.<span class="number">4.21</span>&#x27; not found (required by <span class="keyword">node</span><span class="title">)</span></span><br></pre></td></tr></table></figure><p>通过查看<code>strings /usr/lib64/libstdc++.so.6 | grep GLIBCXX</code> 发现少了GLIBCXX_3.4.20，解决方法是升级libstdc++.</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">yum</span> provides libstdc++.so.<span class="number">6</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="attribute">cd</span> /usr/local/lib64</span><br><span class="line"><span class="comment"># 下载最新版本的libstdc.so_.6.0.26</span></span><br><span class="line"><span class="attribute">wget</span> http://www.vuln.cn/wp-content/uploads/<span class="number">2019</span>/<span class="number">08</span>/libstdc.so_.<span class="number">6</span>.<span class="number">0</span>.<span class="number">26</span>.zip</span><br><span class="line"><span class="attribute">unzip</span> libstdc.so_.<span class="number">6</span>.<span class="number">0</span>.<span class="number">26</span>.zip</span><br><span class="line"><span class="comment"># 将下载的最新版本拷贝到 /usr/lib64</span></span><br><span class="line"><span class="attribute">cp</span> libstdc++.so.<span class="number">6</span>.<span class="number">0</span>.<span class="number">26</span> /usr/lib64</span><br><span class="line"><span class="attribute">cd</span>  /usr/lib64</span><br><span class="line"><span class="comment"># 查看 /usr/lib64下libstdc++.so.6链接的版本</span></span><br><span class="line"><span class="attribute">ls</span> -l | grep libstdc++</span><br><span class="line"><span class="attribute">libstdc</span>++.so.<span class="number">6</span> -&gt;libstdc++.so.<span class="number">6</span>.<span class="number">0</span>.<span class="number">19</span></span><br><span class="line"><span class="comment"># 删除/usr/lib64原来的软连接libstdc++.so.6，删除之前先备份一份</span></span><br><span class="line"><span class="attribute">rm</span> libstdc++.so.<span class="number">6</span></span><br><span class="line"><span class="comment"># 链接新的版本</span></span><br><span class="line"><span class="attribute">ln</span> -s libstdc++.so.<span class="number">6</span>.<span class="number">0</span>.<span class="number">26</span> libstdc++.so.<span class="number">6</span></span><br><span class="line"><span class="comment"># 查看新版本，成功</span></span><br><span class="line"><span class="attribute">strings</span> /usr/lib64/libstdc++.so.<span class="number">6</span> | grep GLIBCXX</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>升级导致的语言包问题，中文有乱码</p><p>特别是<code>crontab -e</code>编辑时里面的中文有些正常，有些乱码</p><figure class="highlight nix"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-<span class="params">bash:</span> <span class="params">warning:</span> <span class="params">setlocale:</span> <span class="params">LC_ALL:</span> cannot change locale (en_US.UTF-<span class="number">8</span>)</span><br></pre></td></tr></table></figure><p>可以通过如下解决</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /root/glibc-2.28/build</span><br><span class="line">make localedata/install-locales</span><br></pre></td></tr></table></figure><p>这样每次登录ssh就不会提示 <code>LC_ALL: cannot change locale</code> 了。</p><p>参考链接：</p><ul><li><a href="https://blog.csdn.net/esdhhh/article/details/121196317">https://blog.csdn.net/esdhhh/article/details/121196317</a></li><li><a href="https://www.jianshu.com/p/050b2b777b9d">https://www.jianshu.com/p/050b2b777b9d</a></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;centos7服务器升级node 20后 &lt;code&gt;n latest&lt;/code&gt;，出现以下问题&lt;/p&gt;
&lt;figure class=&quot;highlight crmsh&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;lin</summary>
      
    
    
    
    <category term="技术" scheme="https://leadscloud.github.io/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
    <category term="node" scheme="https://leadscloud.github.io/tags/node/"/>
    
  </entry>
  
  <entry>
    <title>自己搭建的ChatGPT国内镜像站</title>
    <link href="https://leadscloud.github.io/20230306/chatgpt-mirror-site/"/>
    <id>https://leadscloud.github.io/20230306/chatgpt-mirror-site/</id>
    <published>2023-03-06T09:20:22.000Z</published>
    <updated>2025-04-10T04:42:07.134Z</updated>
    
    <content type="html"><![CDATA[<p><img src="/images/freegpt-data-overview.png"></p><p>ChatGPT国内镜像站，国内使用ChatGPT中文版本</p><p><del><a href="http://chat.tinycms.xyz:3002/">http://chat.tinycms.xyz:3002/</a></del></p><p>域名更改为</p><p><a href="https://freegpt.tech/">https://freegpt.tech/</a></p><p>如果网站无法打开,使用下面的导航链接</p><p><a href="https://site.tinycms.xyz/">https://site.tinycms.xyz</a></p><p>欢迎体验,当前主流模型包括o1-mini模型都可免费体验,deepseek免费用：</p><p><strong>支持</strong></p><ul><li>模拟浏览器登录访问原始chatgpt网站，ChatGPT Plus付费版本</li><li>支持最新的各种chatgpt模型及市面上的其它热门模型</li><li>支持你自己的chatgpt账号中的API key 调用访问</li><li>免费访问gpt-4等模型和部分画图模型</li></ul><span id="more"></span><p>界面是React修改而来，比较简单，不需要登录，直接就能提问</p><p>后来使用的是开源版本的Chat Next Web</p><hr><h3 id="2025-2-10更新"><a href="#2025-2-10更新" class="headerlink" title="2025-2-10更新"></a>2025-2-10更新</h3><p>网站运行满2年了, 中间出过各种问题, 现在运行状态较好, 现在各种类似的网站出现,不过目前这个站还是竞争力比较强的,毕竟大部分都是免费的,可以使用各种模型</p><h3 id="2024-4-25更新"><a href="#2024-4-25更新" class="headerlink" title="2024-4-25更新"></a>2024-4-25更新</h3><p>网站历时一年，目前每天有稳定的捐赠收入了，这个倒是挺意外的。</p><p>目前网站是支持免费的gpt-4的，包括 <code>gpt-4</code>、<code>gpt-4-turbo</code>、<code>gpt-4-1025-preview</code>、<code>gpt-4-1106-preview</code>和<code>gpt-4-vision-preview</code><br>newbing, bard, 百度的文心一言，Google的gemini pro也同时免费支持。</p><p>github的chatgpt免费镜像站排名对我帮助非常大，大部分流量都是从第三方的推荐网站过来的。</p><p>最开始的朋友圈分享，效果有限，流量仅仅集中在熟人之间，反而用的人少。</p><p>通过这个站有以下几点感悟：</p><ol><li>网站的功能实用，是最能吸引人的，但如果没人推荐，你再好也不会被人发现。</li><li>陌生人会捐赠，但身边的熟人或同行反而不会捐赠，因为行业缘故，可能陌生人会觉得这个价值更大些。</li><li>学生是最慷慨的，经常询问的人或一上来就问各种问题的是最不可能付钱的人。</li><li>大户往往是那些什么不问，直接付钱的人，仅仅为了解决一个小问题就可能付很多钱。</li><li>流量达到一定程度，自然就会有转化。</li><li>互联网上恶人很多，但你只需要专注那些有价值的用户即可。</li></ol>]]></content>
    
    
    <summary type="html">&lt;p&gt;&lt;img src=&quot;/images/freegpt-data-overview.png&quot;&gt;&lt;/p&gt;
&lt;p&gt;ChatGPT国内镜像站，国内使用ChatGPT中文版本&lt;/p&gt;
&lt;p&gt;&lt;del&gt;&lt;a href=&quot;http://chat.tinycms.xyz:3002/&quot;&gt;http://chat.tinycms.xyz:3002/&lt;/a&gt;&lt;/del&gt;&lt;/p&gt;
&lt;p&gt;域名更改为&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://freegpt.tech/&quot;&gt;https://freegpt.tech/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;如果网站无法打开,使用下面的导航链接&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://site.tinycms.xyz/&quot;&gt;https://site.tinycms.xyz&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;欢迎体验,当前主流模型包括o1-mini模型都可免费体验,deepseek免费用：&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;支持&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;模拟浏览器登录访问原始chatgpt网站，ChatGPT Plus付费版本&lt;/li&gt;
&lt;li&gt;支持最新的各种chatgpt模型及市面上的其它热门模型&lt;/li&gt;
&lt;li&gt;支持你自己的chatgpt账号中的API key 调用访问&lt;/li&gt;
&lt;li&gt;免费访问gpt-4等模型和部分画图模型&lt;/li&gt;
&lt;/ul&gt;</summary>
    
    
    
    <category term="技术" scheme="https://leadscloud.github.io/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
    <category term="chatgpt" scheme="https://leadscloud.github.io/tags/chatgpt/"/>
    
    <category term="chatgpt镜像站" scheme="https://leadscloud.github.io/tags/chatgpt%E9%95%9C%E5%83%8F%E7%AB%99/"/>
    
  </entry>
  
  <entry>
    <title>代理服务器dante安装到centos</title>
    <link href="https://leadscloud.github.io/20220927/install-proxy-server-dante-on-centos/"/>
    <id>https://leadscloud.github.io/20220927/install-proxy-server-dante-on-centos/</id>
    <published>2022-09-26T17:07:32.000Z</published>
    <updated>2025-04-10T04:42:07.138Z</updated>
    
    <content type="html"><![CDATA[<h3 id="安装步骤"><a href="#安装步骤" class="headerlink" title="安装步骤"></a>安装步骤</h3><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">wget https:<span class="string">//www.inet.no/dante/files/dante-1.4.3.tar.gz</span></span><br><span class="line">tar xf dante-1.4.3.tar.gz</span><br><span class="line"><span class="keyword">cd</span> dante-1.4.3/</span><br><span class="line">autoreconf <span class="params">--install</span> <span class="params">--force</span></span><br><span class="line"><span class="string">./configure</span></span><br><span class="line">make install</span><br></pre></td></tr></table></figure><h3 id="创建并编辑配置文件"><a href="#创建并编辑配置文件" class="headerlink" title="创建并编辑配置文件"></a>创建并编辑配置文件</h3><p><code>vi /etc/sockd.conf</code></p><figure class="highlight nix"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="params">internal:</span> <span class="number">0.0</span>.<span class="number">0.0</span> port<span class="operator">=</span><span class="number">1080</span></span><br><span class="line"><span class="params">external:</span> eth0</span><br><span class="line"></span><br><span class="line"><span class="params">clientmethod:</span> none</span><br><span class="line"><span class="params">socksmethod:</span> username <span class="comment"># 使用系统用户名密码方式验证</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#user.privileged: root</span></span><br><span class="line">user.<span class="params">notprivileged:</span> socks  <span class="comment"># 创建的用户名</span></span><br><span class="line"></span><br><span class="line">client pass &#123;</span><br><span class="line">    <span class="params">from:</span> <span class="number">0</span><span class="symbol">/0</span>  <span class="params">to:</span> <span class="number">0</span><span class="symbol">/0</span></span><br><span class="line">    <span class="comment">#log: connect disconnect error</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">socks pass &#123;</span><br><span class="line">    <span class="params">from:</span> <span class="number">0</span><span class="symbol">/0</span>  <span class="params">to:</span> <span class="number">0</span><span class="symbol">/0</span></span><br><span class="line">    <span class="comment">#log: connect disconnect error</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>127.0.0.1 替换成 x.x.x.x&#x2F;8 即可。</p><p>配置说明： <a href="https://www.inet.no/dante/doc/1.4.x/config/server.html">https://www.inet.no/dante/doc/1.4.x/config/server.html</a></p><h3 id="添加用户"><a href="#添加用户" class="headerlink" title="添加用户"></a>添加用户</h3><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">adduser <span class="params">--no-create-home</span> <span class="params">--shell</span> <span class="string">/usr/sbin/nologin</span> socks <span class="comment"># 添加一个本地用户，不创建默认目录和登录Shell</span></span><br><span class="line"></span><br><span class="line">passwd socks <span class="comment"># 设置一个密码</span></span><br></pre></td></tr></table></figure><h3 id="运行"><a href="#运行" class="headerlink" title="运行"></a>运行</h3><p>直接以daemon模式运行</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">sockd -D</span></span><br></pre></td></tr></table></figure><h3 id="测试代理"><a href="#测试代理" class="headerlink" title="测试代理"></a>测试代理</h3><p>使用内置的-V命令测试sockd.conf文件是否正确，若正确则无任何输出</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">sockd -V</span></span><br></pre></td></tr></table></figure><p>测试能否正常使用</p><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl <span class="punctuation">-</span><span class="punctuation">-</span>proxy &#x27;socks5://127.0.0.1:<span class="number">1080</span>&#x27; &#x27;https://api.ipify.org/&#x27;</span><br></pre></td></tr></table></figure><p>可以使用 <code>netstat -lntp</code> 看启动状态</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">tcp</span>        <span class="number">0</span>      <span class="number">0</span> <span class="number">0.0.0.0:1080</span>            <span class="number">0.0.0.0</span>:*               LISTEN      <span class="number">16769</span>/sockd</span><br></pre></td></tr></table></figure><h3 id="开机启动"><a href="#开机启动" class="headerlink" title="开机启动"></a>开机启动</h3><p><code>vi /etc/rc.local</code></p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="regexp">/usr/</span>local<span class="regexp">/sbin/</span>sockd -f <span class="regexp">/etc/</span>sockd.conf &amp;</span><br></pre></td></tr></table></figure><h3 id="关闭"><a href="#关闭" class="headerlink" title="关闭"></a>关闭</h3><p><code>killall sockd</code></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h3 id=&quot;安装步骤&quot;&gt;&lt;a href=&quot;#安装步骤&quot; class=&quot;headerlink&quot; title=&quot;安装步骤&quot;&gt;&lt;/a&gt;安装步骤&lt;/h3&gt;&lt;figure class=&quot;highlight jboss-cli&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;</summary>
      
    
    
    
    <category term="Linux" scheme="https://leadscloud.github.io/categories/Linux/"/>
    
    
    <category term="proxy" scheme="https://leadscloud.github.io/tags/proxy/"/>
    
  </entry>
  
  <entry>
    <title>Python requests 如何使用 oauth2client.service_account</title>
    <link href="https://leadscloud.github.io/20220914/python-requests-use-oauth2client/"/>
    <id>https://leadscloud.github.io/20220914/python-requests-use-oauth2client/</id>
    <published>2022-09-14T03:50:00.000Z</published>
    <updated>2025-04-10T04:42:07.142Z</updated>
    
    <content type="html"><![CDATA[<p>Google的API一般是下面这种使用方法，使用的是oauth2client</p><figure class="highlight oxygene"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> oauth2client.service_account import ServiceAccountCredentials</span><br><span class="line">import httplib2</span><br><span class="line">credentials = ServiceAccountCredentials.from_json_keyfile_name(JSON_KEY_FILE, scopes=SCOPES)</span><br><span class="line">http = credentials.authorize(httplib2.Http())</span><br><span class="line"></span><br><span class="line">response, content = http.request(ENDPOINT, <span class="keyword">method</span>=&quot;<span class="title function_">POST</span>&quot;, <span class="title function_">body</span>=<span class="title function_">json_ctn</span>)</span><br></pre></td></tr></table></figure><p>众所周知的原因，在国内你这样使用，必须得用代理，使用requests包非常方便，但是如果是上面的代码，使用代理有点小麻烦</p><p>你需要在代码前面加上</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">import socket</span><br><span class="line">socket<span class="selector-class">.socket</span> = socks<span class="selector-class">.socksocket</span></span><br><span class="line">socks<span class="selector-class">.setdefaultproxy</span>(socks<span class="selector-class">.PROXY_TYPE_SOCKS5</span>, <span class="string">&quot;127.0.0.1&quot;</span>, <span class="number">1080</span>)</span><br></pre></td></tr></table></figure><p>比较麻烦。</p><p>可以用requests代替上面的操作，一般如下</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">http = httplib2<span class="selector-class">.Http</span>(proxy_info=httplib2<span class="selector-class">.ProxyInfo</span>(httplib2<span class="selector-class">.socks</span><span class="selector-class">.PROXY_TYPE_SOCKS5</span>, <span class="string">&#x27;127.0.0.1&#x27;</span>, <span class="number">1080</span>))</span><br><span class="line"></span><br><span class="line">credentials = ServiceAccountCredentials<span class="selector-class">.from_json_keyfile_name</span>(JSON_KEY_FILE, scopes=SCOPES)</span><br><span class="line">access_token_info = credentials<span class="selector-class">.get_access_token</span>(http)</span><br><span class="line"></span><br><span class="line">requests<span class="selector-class">.get</span>(url, params=&#123;</span><br><span class="line">    <span class="string">&quot;url&quot;</span>: <span class="string">&quot;http://foo.com&quot;</span></span><br><span class="line">&#125;, proxies=&#123;</span><br><span class="line">    <span class="string">&#x27;http&#x27;</span>: <span class="string">&quot;socks5://127.0.0.1:1080&quot;</span>,</span><br><span class="line">    <span class="string">&#x27;https&#x27;</span>: <span class="string">&quot;socks5://127.0.0.1:1080&quot;</span>,</span><br><span class="line">&#125;, headers=&#123;</span><br><span class="line">    <span class="string">&quot;Authorization&quot;</span>: <span class="string">&#x27;Bearer &#x27;</span> + access_token_info<span class="selector-class">.access_token</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>参考代码： <a href="https://github.com/googleapis/oauth2client/blob/master/oauth2client/transport.py">https://github.com/googleapis/oauth2client/blob/master/oauth2client/transport.py</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;Google的API一般是下面这种使用方法，使用的是oauth2client&lt;/p&gt;
&lt;figure class=&quot;highlight oxygene&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/spa</summary>
      
    
    
    
    <category term="技术" scheme="https://leadscloud.github.io/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
    <category term="python" scheme="https://leadscloud.github.io/tags/python/"/>
    
    <category term="oauth2client" scheme="https://leadscloud.github.io/tags/oauth2client/"/>
    
  </entry>
  
  <entry>
    <title>LNMP网站启用Cloudflare CDN之后如何记录用户真实IP</title>
    <link href="https://leadscloud.github.io/20220501/lnmp-config-for-cloudflare-cdn/"/>
    <id>https://leadscloud.github.io/20220501/lnmp-config-for-cloudflare-cdn/</id>
    <published>2022-04-30T16:03:02.000Z</published>
    <updated>2025-04-10T04:42:07.140Z</updated>
    
    <content type="html"><![CDATA[<h2 id="安装-NGINX-http-realip-module-模块"><a href="#安装-NGINX-http-realip-module-模块" class="headerlink" title="安装 NGINX http_realip_module 模块"></a>安装 NGINX http_realip_module 模块</h2><p>在 LNMP 安装目录下找到 lnmp.conf 这个文件，编辑这个文件，在 Nginx_Modules_Options 里加上 <code>--with-http_realip_module</code>，修改的命令如下：</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">Nginx_Modules_Options</span>=<span class="string">&#x27;--with-http_realip_module&#x27;</span></span><br></pre></td></tr></table></figure><p>保存后执行 .&#x2F;upgrade.sh nginx 来升级下 NGINX 就可以了。升级需要输入新的 NGINX 版本号，如果不想改动版本，直接输入原来的版本号即可。</p><h2 id="修改-LNMP-配置启用模块"><a href="#修改-LNMP-配置启用模块" class="headerlink" title="修改 LNMP 配置启用模块"></a>修改 LNMP 配置启用模块</h2><p>修改配置文件 <code>/usr/local/nginx/conf/nginx.conf</code> </p><p>创建文件 <code>touch /usr/local/nginx/conf/cloudflare_ip.conf</code></p><p>然后，在 <code>server &#123;&#125;</code> 里面加上下面这一行：</p><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">include</span> cloudflare_ip.<span class="keyword">conf</span>;</span><br></pre></td></tr></table></figure><p>在 &#x2F;root 目录下创建下面文件：</p><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">update_cloudflare_ip.<span class="keyword">sh</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;#Cloudflare&quot;</span> &gt; /usr/local/nginx/conf/cloudflare_ip.conf;</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> `curl https://www.cloudflare.com/ips-v4`; <span class="keyword">do</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">&quot;set_real_ip_from <span class="variable">$i</span>;&quot;</span> &gt;&gt; /usr/local/nginx/conf/cloudflare_ip.conf;</span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> `curl https://www.cloudflare.com/ips-v6`; <span class="keyword">do</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">&quot;set_real_ip_from <span class="variable">$i</span>;&quot;</span> &gt;&gt; /usr/local/nginx/conf/cloudflare_ip.conf;</span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;&quot;</span> &gt;&gt; /usr/local/nginx/conf/cloudflare_ip.conf;</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;# use any of the following two&quot;</span> &gt;&gt; /usr/local/nginx/conf/cloudflare_ip.conf;</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;real_ip_header CF-Connecting-IP;&quot;</span> &gt;&gt; /usr/local/nginx/conf/cloudflare_ip.conf;</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;#real_ip_header X-Forwarded-For;&quot;</span> &gt;&gt; /usr/local/nginx/conf/cloudflare_ip.conf;</span><br></pre></td></tr></table></figure><p>执行一次脚本：<code>/bin/bash /root/update_cloudflare_ip.sh</code></p><p>保存之后，配置 crontab 每周更新一次 Cloudflare 的 IP 地址（crontab -e）：</p><figure class="highlight basic"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">0 </span><span class="number">5</span> * * <span class="number">1</span> /bin/bash /root/update_cloudflare_ip.sh</span><br></pre></td></tr></table></figure><h2 id="修改日志记录配置"><a href="#修改日志记录配置" class="headerlink" title="修改日志记录配置"></a>修改日志记录配置</h2><p>还是修改 <code>/usr/local/nginx/conf/nginx.conf</code> 这个文件，在 <code>http &#123;&#125;</code> 中间加入下面几行：</p><figure class="highlight nsis"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 这是网上大部分的教程这样写的，不对，正确的请看下面的追加</span></span><br><span class="line"></span><br><span class="line">map <span class="variable">$HTTP_CF_CONNECTING_IP</span>  <span class="variable">$clientRealIp</span> &#123;</span><br><span class="line">    <span class="string">&quot;&quot;</span>    <span class="variable">$remote_addr</span><span class="comment">;</span></span><br><span class="line">    ~^(?P&lt;firstAddr&gt;[<span class="number">0</span>-<span class="number">9</span>]+\.[<span class="number">0</span>-<span class="number">9</span>]+\.[<span class="number">0</span>-<span class="number">9</span>]+\.[<span class="number">0</span>-<span class="number">9</span>]+|[<span class="number">0</span>-<span class="number">9</span>A-Fa-f]+:[<span class="number">0</span>-<span class="number">9</span>A-Fa-f]+:[<span class="number">0</span>-<span class="number">9</span>A-Fa-f]+:[<span class="number">0</span>-<span class="number">9</span>A-Fa-f]+:[<span class="number">0</span>-<span class="number">9</span>A-Fa-f]+:[<span class="number">0</span>-<span class="number">9</span>A-Fa-f]+:[<span class="number">0</span>-<span class="number">9</span>A-Fa-f]+:[<span class="number">0</span>-<span class="number">9</span>A-Fa-f]+),?.*$ <span class="variable">$firstAddr</span><span class="comment">;</span></span><br><span class="line">&#125;</span><br><span class="line">log_format  main  <span class="string">&#x27;<span class="variable">$clientRealIp</span> [<span class="variable">$time_local</span>] &quot;<span class="variable">$request</span>&quot; &#x27;</span></span><br><span class="line">                  <span class="string">&#x27;<span class="variable">$status</span> <span class="variable">$body_bytes_sent</span> &quot;<span class="variable">$http_referer</span>&quot; &#x27;</span></span><br><span class="line">                  <span class="string">&#x27;<span class="variable">$http_user_agent</span> <span class="variable">$remote_addr</span> <span class="variable">$request_time</span>&#x27;</span><span class="comment">;</span></span><br></pre></td></tr></table></figure><p><em>注意</em>： 如果<code>include cloudflare_ip.conf;</code> 放在 <code>http &#123;&#125;</code>中，$remote_addr会替换为真实的ip地址，不需要上面的修改了。</p><p>然后在网站记录的日志定义使用main这个日志格式</p><p><strong>2023-6-5修改：</strong></p><p>上面的代码是有问题的，网上大部分的教程也是如此，这用特地说明下</p><p><code>$HTTP_CF_CONNECTING_IP</code>是使用cloudflare后，cf传给服务器的用户真实ip, 为了防止有人伪造headers，使用了 <code>set_real_ip_from</code>, 这样可以保证只能cloudflare的ip地址传过来的 <code>headders[&quot;CF-Connecting-IP&quot;]</code> 我们才相信。</p><p>所以通常情况下，你不需要安装<code>--with-http_realip_module</code>这个组件，大部分情况下直接相信cloudflare即可。</p><p>上面的map应该修改为</p><figure class="highlight haxe"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">map <span class="variable">$http_cf_connecting_ip</span> <span class="variable">$clientRealIp</span> &#123;</span><br><span class="line">  <span class="string">&quot;&quot;</span> <span class="variable">$remote_addr</span>; <span class="meta">#如果为空，使用remote_addr</span></span><br><span class="line">  <span class="keyword">default</span> <span class="variable">$http_cf_connecting_ip</span>; <span class="meta"># 默认http_cf_connecting_ip headers传过来的值</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>上面那个匹配ip的正则是错误的，比如这个ipv6地址就无法匹配 <code>2001:41d0:303:363::1</code>, 这是ipv6的一种缩写形式，所以网上大部分的教程是错误的。</p><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">access_log /home/wwwlogs/abc.com.<span class="built_in">log</span> main<span class="punctuation">;</span></span><br></pre></td></tr></table></figure><p>最后重载下nginx</p><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">/etc/init.d/nginx</span> <span class="keyword">reload</span></span><br></pre></td></tr></table></figure><p>这时就全部搞定了。</p><h2 id="防火墙如何封禁真实的用户ip"><a href="#防火墙如何封禁真实的用户ip" class="headerlink" title="防火墙如何封禁真实的用户ip"></a>防火墙如何封禁真实的用户ip</h2><p>开了 CDN 之后使用 iptables 是没法封禁真实 IP 地址的。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;安装-NGINX-http-realip-module-模块&quot;&gt;&lt;a href=&quot;#安装-NGINX-http-realip-module-模块&quot; class=&quot;headerlink&quot; title=&quot;安装 NGINX http_realip_module 模块&quot;&gt;</summary>
      
    
    
    
    <category term="Linux" scheme="https://leadscloud.github.io/categories/Linux/"/>
    
    
    <category term="VPS" scheme="https://leadscloud.github.io/tags/VPS/"/>
    
    <category term="CentOS" scheme="https://leadscloud.github.io/tags/CentOS/"/>
    
    <category term="lnmp" scheme="https://leadscloud.github.io/tags/lnmp/"/>
    
    <category term="lnmpa" scheme="https://leadscloud.github.io/tags/lnmpa/"/>
    
  </entry>
  
  <entry>
    <title>Wordpress使用SQL语句替换所有关键词</title>
    <link href="https://leadscloud.github.io/20211231/wordpress-use-sql-replace-all-content/"/>
    <id>https://leadscloud.github.io/20211231/wordpress-use-sql-replace-all-content/</id>
    <published>2021-12-31T02:09:03.000Z</published>
    <updated>2025-04-10T04:42:07.146Z</updated>
    
    <content type="html"><![CDATA[<p>Wordpress 使用 Eelementor 插件时，编辑内容，会保存到wp_postmeta中，对于中文一些替换插件 <code>Better Search Replace</code> 等没有问题，但如果是中文，你会发现使用替换工具替换后，内容不变。</p><p>这主要是因为中文内容保存为json格式后，会编码为unicode格式，所以无法替换，可以使用下面方法替换。</p><figure class="highlight taggerscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select count(*) from wp_postmeta where meta_value like &#x27;%<span class="symbol">\\</span><span class="symbol">\\</span>u539f<span class="symbol">\\</span><span class="symbol">\\</span>u59cb<span class="symbol">\\</span><span class="symbol">\\</span>u5b57%<span class="symbol">\\</span><span class="symbol">\\</span>u7b26&#x27;;</span><br></pre></td></tr></table></figure><blockquote><p>SELECT语句中四个反斜杠（\）代表一个.<br>在mysql的like语法中，like后边的字符串除了会在语法解析时转义一次外，还会在正则匹配时进行第二次的转义。因此如果期望最终匹配到””，就要反转义两次，也就是由”&quot;到”&quot;再到””。<br>如果是普通的精确查询（&#x3D;），则无需第二次的正则转义，和INSERT语句一样。</p></blockquote><p>比如 <code>原始字符</code> 替换为 <code>替换字符</code></p><figure class="highlight taggerscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">UPDATE wp_postmeta </span><br><span class="line">SET meta_value = REPLACE( </span><br><span class="line">  meta_value, </span><br><span class="line">  &#x27;<span class="symbol">\\</span><span class="symbol">\u539f</span><span class="symbol">\\</span><span class="symbol">\u59cb</span><span class="symbol">\\</span><span class="symbol">\u5b57</span><span class="symbol">\\</span><span class="symbol">\u7b26</span>&#x27;, </span><br><span class="line">  &#x27;<span class="symbol">\\</span><span class="symbol">\u66ff</span><span class="symbol">\\</span><span class="symbol">\u6362</span><span class="symbol">\\</span><span class="symbol">\u5b57</span><span class="symbol">\\</span><span class="symbol">\u7b26</span>&#x27; </span><br><span class="line">);</span><br></pre></td></tr></table></figure><blockquote><p>可以使用js的 <code>escape</code> 来把中文转为unicode编码</p></blockquote><h3 id="wordpress内容替换SQL语句"><a href="#wordpress内容替换SQL语句" class="headerlink" title="wordpress内容替换SQL语句"></a>wordpress内容替换SQL语句</h3><figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">UPDATE</span> wp_options <span class="keyword">SET</span> option_value = <span class="built_in">replace</span>(option_value, <span class="string">&#x27;http://www.yoursitename.com&#x27;</span>, <span class="string">&#x27;http://localhost&#x27;</span>) <span class="keyword">WHERE</span> option_name = <span class="string">&#x27;home&#x27;</span> <span class="keyword">OR</span> option_name = <span class="string">&#x27;siteurl&#x27;</span>;</span><br><span class="line"><span class="keyword">UPDATE</span> wp_posts <span class="keyword">SET</span> post_content = <span class="built_in">replace</span>(post_content, <span class="string">&#x27;http://www.yoursitename.com&#x27;</span>, <span class="string">&#x27;http://localhost&#x27;</span>);</span><br><span class="line"><span class="keyword">UPDATE</span> wp_postmeta <span class="keyword">SET</span> meta_value = <span class="built_in">replace</span>(meta_value,<span class="string">&#x27;http://www.yoursitename.com&#x27;</span>,<span class="string">&#x27;http://localhost&#x27;</span>);</span><br></pre></td></tr></table></figure><h3 id="mysqldump工具来备份wordpress数据库"><a href="#mysqldump工具来备份wordpress数据库" class="headerlink" title="mysqldump工具来备份wordpress数据库"></a>mysqldump工具来备份wordpress数据库</h3><p>在操作前，无论使用插件还是sql语句，都要先备份数据库</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> mysqldump -u root wordpress &gt; wordpress.sql</span><br></pre></td></tr></table></figure><h3 id="备份wordpress根目录下的所有文件"><a href="#备份wordpress根目录下的所有文件" class="headerlink" title="备份wordpress根目录下的所有文件"></a>备份wordpress根目录下的所有文件</h3><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo tar -cpvzf wordpress.tar.gz <span class="regexp">/home/</span>wwwroot<span class="regexp">/wordpress/</span></span><br></pre></td></tr></table></figure><p>上面的命令包含5个参数，分别为：</p><ul><li>-c 创建一个归档文件；</li><li>-p 保留已归档文件的相应权限设置；</li><li>-v 显示详细信息；</li><li>-z 使用gzip压缩归档文件；</li><li>-f 代表文件。</li></ul><p>执行上述命令后，<code>/home/wwwroot/wordpress/</code>文件夹下的所有文件都会被归档和压缩。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;Wordpress 使用 Eelementor 插件时，编辑内容，会保存到wp_postmeta中，对于中文一些替换插件 &lt;code&gt;Better Search Replace&lt;/code&gt; 等没有问题，但如果是中文，你会发现使用替换工具替换后，内容不变。&lt;/p&gt;
&lt;p&gt;这</summary>
      
    
    
    
    <category term="Wordpress学习" scheme="https://leadscloud.github.io/categories/Wordpress%E5%AD%A6%E4%B9%A0/"/>
    
    
    <category term="wordpress" scheme="https://leadscloud.github.io/tags/wordpress/"/>
    
  </entry>
  
  <entry>
    <title>CentOS7从U盘自动解锁加密的根目录磁盘</title>
    <link href="https://leadscloud.github.io/20210930/automatically-unlock-LUKS-encrypted-root-disk-with-keyfile-from-USB/"/>
    <id>https://leadscloud.github.io/20210930/automatically-unlock-LUKS-encrypted-root-disk-with-keyfile-from-USB/</id>
    <published>2021-09-30T06:06:00.000Z</published>
    <updated>2025-04-10T04:42:07.133Z</updated>
    
    <content type="html"><![CDATA[<p>安装centos7时，有一个提示，是否加密磁盘，选择此选项后，每次启动系统都会要求你输入密码，这样可以保证磁盘如果没有密码，放到其它电脑上也无法使用。对数据会更加安全。</p><p>但每次手动输入密码还是比较麻烦，最好是把密钥放到U盘里，插上后就可以自动解锁，不需要输入人工输入密码。</p><p>我搜索了下，网上关于此的教程都无法完美解决，没有非常完善的文档，下面两个教程是最靠谱的，我也是根据这些教程，在虚拟机上测试成功后才找到具体的原因。</p><p><a href="https://forums.centos.org/viewtopic.php?t=53452">https://forums.centos.org/viewtopic.php?t=53452</a><br><a href="https://community.spiceworks.com/how_to/168683-cenos-7-encrypt-my-data-and-use-usb-key-for-unlock">https://community.spiceworks.com/how_to/168683-cenos-7-encrypt-my-data-and-use-usb-key-for-unlock</a></p><p>以下为完整的操作步骤：</p><h3 id="创建一个带有keyfile的usb盘"><a href="#创建一个带有keyfile的usb盘" class="headerlink" title="创建一个带有keyfile的usb盘"></a>创建一个带有keyfile的usb盘</h3><p>使用fat格式即可，这样在windows电脑上也能使用</p><p>先通过lsblk blkid命令，查看系统上的硬盘情况。</p><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># lsblk</span></span><br><span class="line">NAME                                          MAJ:MIN RM  SIZE RO TYPE  MOUNTPOINT</span><br><span class="line">sda                                             8:0   <span class="number"> 0 </span>11.9G <span class="number"> 0 </span>disk</span><br><span class="line">├─sda1                                          8:1   <span class="number"> 0 </span> 200M <span class="number"> 0 </span>part  /boot/efi</span><br><span class="line">├─sda2                                          8:2   <span class="number"> 0 </span>   1G <span class="number"> 0 </span>part  /boot</span><br><span class="line">└─sda3                                          8:3   <span class="number"> 0 </span>10.7G <span class="number"> 0 </span>part</span><br><span class="line">  └─luks-535d89c0-9b67-4138-a0f3-0879ef2a6cc6 253:0   <span class="number"> 0 </span>10.7G <span class="number"> 0 </span>crypt</span><br><span class="line">    ├─centos-root                             253:1   <span class="number"> 0 </span> 9.5G <span class="number"> 0 </span>lvm   /</span><br><span class="line">    └─centos-swap                             253:2   <span class="number"> 0 </span> 1.2G <span class="number"> 0 </span>lvm   [SWAP]</span><br><span class="line">sdb                                             8:16  <span class="number"> 1 </span> 954M <span class="number"> 0 </span>disk</span><br><span class="line">└─sdb1                                          8:17  <span class="number"> 1 </span> 954M <span class="number"> 0 </span>part  /media</span><br><span class="line">sr0                                            11:0   <span class="number"> 1 </span>1024M <span class="number"> 0 </span>rom</span><br></pre></td></tr></table></figure><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# blkid</span><br><span class="line">/dev/sda1: <span class="attribute">SEC_TYPE</span>=<span class="string">&quot;msdos&quot;</span> <span class="attribute">UUID</span>=<span class="string">&quot;FC4C-1E93&quot;</span> <span class="attribute">TYPE</span>=<span class="string">&quot;vfat&quot;</span> <span class="attribute">PARTLABEL</span>=<span class="string">&quot;EFI System Partition&quot;</span> <span class="attribute">PARTUUID</span>=<span class="string">&quot;dbf79d09-cbbf-4a09-8ac5-b997ae1c6dfd&quot;</span></span><br><span class="line">/dev/sda2: <span class="attribute">UUID</span>=<span class="string">&quot;d4857a61-09d5-4768-b564-e3a12c2ca7d0&quot;</span> <span class="attribute">TYPE</span>=<span class="string">&quot;xfs&quot;</span> <span class="attribute">PARTUUID</span>=<span class="string">&quot;aa583022-7407-40dc-8f9e-1cb147dccd8b&quot;</span></span><br><span class="line">/dev/sda3: <span class="attribute">UUID</span>=<span class="string">&quot;535d89c0-9b67-4138-a0f3-0879ef2a6cc6&quot;</span> <span class="attribute">TYPE</span>=<span class="string">&quot;crypto_LUKS&quot;</span> <span class="attribute">PARTUUID</span>=<span class="string">&quot;1e55ca3d-3636-4c37-8e27-d9bda13099a7&quot;</span></span><br><span class="line">/dev/sdb1: <span class="attribute">SEC_TYPE</span>=<span class="string">&quot;msdos&quot;</span> <span class="attribute">LABEL</span>=<span class="string">&quot;NEW&quot;</span> <span class="attribute">UUID</span>=<span class="string">&quot;A06A-C2D3&quot;</span> <span class="attribute">TYPE</span>=<span class="string">&quot;vfat&quot;</span></span><br><span class="line">/dev/mapper/luks-535d89c0-9b67-4138-a0f3-0879ef2a6cc6: <span class="attribute">UUID</span>=<span class="string">&quot;nkQRNs-YN39-SR5g-Ge4r-jHNB-yfi4-PszeGt&quot;</span> <span class="attribute">TYPE</span>=<span class="string">&quot;LVM2_member&quot;</span></span><br><span class="line">/dev/mapper/centos-root: <span class="attribute">UUID</span>=<span class="string">&quot;e5859343-e19d-4cf3-9ef9-c86664a8cae3&quot;</span> <span class="attribute">TYPE</span>=<span class="string">&quot;xfs&quot;</span></span><br><span class="line">/dev/mapper/centos-swap: <span class="attribute">UUID</span>=<span class="string">&quot;045010bd-a926-4202-9467-6e54d110688d&quot;</span> <span class="attribute">TYPE</span>=<span class="string">&quot;swap&quot;</span></span><br></pre></td></tr></table></figure><p>上面<code>/dev/sda3</code>为加密的磁盘，<code>/dev/sdb1</code>为U盘（FAT文件系统）。记下他们的uuid，分别为<br><code>535d89c0-9b67-4138-a0f3-0879ef2a6cc6</code> 和 <code>A06A-C2D3</code></p><p>先挂载U盘，并创建相应的文件</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">mount /dev/sdb1 /media </span><br><span class="line"><span class="built_in">mkdir</span> /media/cryptboot </span><br><span class="line"><span class="built_in">cd</span> /media/cryptboot</span><br><span class="line"></span><br><span class="line"><span class="comment">#创建一个keyfile到u盘中</span></span><br><span class="line"><span class="built_in">dd</span> <span class="keyword">if</span>=/dev/urandom bs=4096 count=1 of=/media/cryptboot/boot.key</span><br><span class="line"></span><br><span class="line"><span class="comment">#把boot.key添加为解锁的密钥，会弹出 Enter any existing passphrase: 让你输入密码</span></span><br><span class="line">cryptsetup luksAddKey /dev/sda3 /media/cryptboot/boot.key</span><br></pre></td></tr></table></figure><p>测试下添加的密钥文件有没有成功：</p><figure class="highlight sas"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# cryptsetup luksOpen -v --<span class="keyword">key</span>-<span class="keyword">file</span> /media/cryptboot/boot.<span class="keyword">key</span> --test-passphrase /dev/sda3</span><br><span class="line"><span class="keyword">Key</span> slot 1 unlocked.</span><br><span class="line">Command successful.</span><br></pre></td></tr></table></figure><p>出现上面命令就是成功了。</p><h3 id="修改启动方式"><a href="#修改启动方式" class="headerlink" title="修改启动方式"></a>修改启动方式</h3><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cp <span class="regexp">/etc/</span><span class="keyword">default</span><span class="regexp">/grub /</span>etc<span class="regexp">/default/g</span>rub.original</span><br><span class="line">sed -i <span class="string">&#x27;s|rd.lvm.lv=centos/swap|rd.luks.key=cryptboot/boot.key:UUID=A06A-C2D3 rd.lvm.lv=centos/swap|g&#x27;</span> <span class="regexp">/etc/</span><span class="keyword">default</span>/grub</span><br></pre></td></tr></table></figure><p>即是在 <code>/etc/default/grub</code> 中GRUB_CMDLINE_LINUX这一行添加 <code>rd.luks.key=cryptboot/boot.key:UUID=A06A-C2D3</code></p><p>下面是修改后的</p><figure class="highlight dos"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">GRUB_CMDLINE_LINUX=&quot;crashkernel=auto <span class="built_in">rd</span>.lvm.lv=centos/root <span class="built_in">rd</span>.luks.uuid=luks-<span class="number">535</span>d89c0-<span class="number">9</span>b67-<span class="number">4138</span>-a0f3-<span class="number">0879</span>ef2a6cc6 <span class="built_in">rd</span>.luks.key=cryptboot/boot.key:UUID=A06A-C2D3 <span class="built_in">rd</span>.lvm.lv=centos/swap rhgb quiet&quot;</span><br></pre></td></tr></table></figure><h3 id="修改下文件-etc-dracut-conf"><a href="#修改下文件-etc-dracut-conf" class="headerlink" title="修改下文件/etc/dracut.conf"></a>修改下文件<code>/etc/dracut.conf</code></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;add_drivers+=&quot;vfat nls_cp437 nls_iso8859-1 ext4&quot;&#x27;</span> &gt;&gt; /etc/dracut.conf</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;omit_dracutmodules+=&quot;systemd&quot;&#x27;</span> &gt;&gt; /etc/dracut.conf</span><br></pre></td></tr></table></figure><h3 id="重新生成grub-和-initramfs"><a href="#重新生成grub-和-initramfs" class="headerlink" title="重新生成grub 和 initramfs"></a>重新生成grub 和 initramfs</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">grub2-mkconfig -o /boot/grub2/grub.cfg</span><br><span class="line">或</span><br><span class="line">grub2-mkconfig -o /boot/efi/EFI/centos/grub.cfg</span><br><span class="line"></span><br><span class="line">dracut --force -v</span><br></pre></td></tr></table></figure><p>之前一直不成功的原因是，我的电脑 是uefi启动方式+GPT磁盘，所以应该使用 <code>grub2-mkconfig -o /boot/efi/EFI/centos/grub.cfg</code>。这点很重要。</p><p>之后重启电脑就可以了。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;安装centos7时，有一个提示，是否加密磁盘，选择此选项后，每次启动系统都会要求你输入密码，这样可以保证磁盘如果没有密码，放到其它电脑上也无法使用。对数据会更加安全。&lt;/p&gt;
&lt;p&gt;但每次手动输入密码还是比较麻烦，最好是把密钥放到U盘里，插上后就可以自动解锁，不需要输入人</summary>
      
    
    
    
    <category term="Linux" scheme="https://leadscloud.github.io/categories/Linux/"/>
    
    
    <category term="linux" scheme="https://leadscloud.github.io/tags/linux/"/>
    
    <category term="centos" scheme="https://leadscloud.github.io/tags/centos/"/>
    
  </entry>
  
  <entry>
    <title>centos恢复被删除的文件</title>
    <link href="https://leadscloud.github.io/20210913/centos-restore-deleted-files/"/>
    <id>https://leadscloud.github.io/20210913/centos-restore-deleted-files/</id>
    <published>2021-09-13T07:35:00.000Z</published>
    <updated>2025-04-10T04:42:07.134Z</updated>
    
    <content type="html"><![CDATA[<h3 id="列出被删除的文件"><a href="#列出被删除的文件" class="headerlink" title="列出被删除的文件"></a>列出被删除的文件</h3><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lsof <span class="string">| grep deleted</span></span><br></pre></td></tr></table></figure><p>第2列是进程id，第4列是文件描述符</p><h3 id="查看删除文件"><a href="#查看删除文件" class="headerlink" title="查看删除文件"></a>查看删除文件</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">ls</span> -l /proc/进程<span class="built_in">id</span>/fd/文件描述符</span><br></pre></td></tr></table></figure><h3 id="恢复文件"><a href="#恢复文件" class="headerlink" title="恢复文件"></a>恢复文件</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cp</span> /proc/进程<span class="built_in">id</span>/fd/文件描述符 Newfilename</span><br></pre></td></tr></table></figure><h2 id="mysql数据库删除恢复"><a href="#mysql数据库删除恢复" class="headerlink" title="mysql数据库删除恢复"></a>mysql数据库删除恢复</h2><p>使用上面的命令恢复文件后，发现mysql数据库只恢复了<code>.ibd</code>文件，<code>.frm</code>文件无法使用lsof恢复</p><p>使用其它的表结构，复制到数据库目录，或者重新创建一个表<code>drop table tbl_name</code>。</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> tbl_name <span class="keyword">DISCARD</span> <span class="keyword">TABLESPACE</span>;</span><br></pre></td></tr></table></figure><p>这个命令会删除相应的ibd文件。</p><p>从备份文件中复制ibd文件到数据库目录，然后执行下面的命令。</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> tbl_name <span class="keyword">IMPORT</span> <span class="keyword">TABLESPACE</span>;</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h3 id=&quot;列出被删除的文件&quot;&gt;&lt;a href=&quot;#列出被删除的文件&quot; class=&quot;headerlink&quot; title=&quot;列出被删除的文件&quot;&gt;&lt;/a&gt;列出被删除的文件&lt;/h3&gt;&lt;figure class=&quot;highlight 1c&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class</summary>
      
    
    
    
    <category term="Linux" scheme="https://leadscloud.github.io/categories/Linux/"/>
    
    
    <category term="centos" scheme="https://leadscloud.github.io/tags/centos/"/>
    
  </entry>
  
  <entry>
    <title>move lnmp mysql datadir to new disk on centos</title>
    <link href="https://leadscloud.github.io/20210905/move-lnmp-mysql-datadir-to-new-disk-on-centos/"/>
    <id>https://leadscloud.github.io/20210905/move-lnmp-mysql-datadir-to-new-disk-on-centos/</id>
    <published>2021-09-05T02:59:38.000Z</published>
    <updated>2025-04-10T04:42:07.141Z</updated>
    
    <content type="html"><![CDATA[<p>lnmp centos下mysql迁移数据目录到新硬盘</p><h2 id="centos-硬盘分区"><a href="#centos-硬盘分区" class="headerlink" title="centos 硬盘分区"></a>centos 硬盘分区</h2><p>电脑中已经挂载了一个1T的新硬盘，最初安装centos系统时原先的nfts硬盘 <code>sdb</code>。</p><p><code>lsblk</code></p><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">NAME                                          MAJ:MIN RM   SIZE RO TYPE  MOUNTPOINT</span><br><span class="line">sda                                             8:0   <span class="number"> 0 </span>223.6G <span class="number"> 0 </span>disk  </span><br><span class="line">├─sda1                                          8:1   <span class="number"> 0 </span>  200M <span class="number"> 0 </span>part  /boot/efi</span><br><span class="line">├─sda2                                          8:2   <span class="number"> 0 </span>    1G <span class="number"> 0 </span>part  /boot</span><br><span class="line">└─sda3                                          8:3   <span class="number"> 0 </span>222.4G <span class="number"> 0 </span>part  </span><br><span class="line">  └─luks-61af80c4-4d0a-4312-aae1-b66abd729eb5 253:0   <span class="number"> 0 </span>222.4G <span class="number"> 0 </span>crypt </span><br><span class="line">    ├─centos-root                             253:1   <span class="number"> 0 </span>  185G <span class="number"> 0 </span>lvm   /</span><br><span class="line">    ├─centos-swap                             253:2   <span class="number"> 0 </span>  7.8G <span class="number"> 0 </span>lvm   [SWAP]</span><br><span class="line">    └─centos-home                             253:3   <span class="number"> 0 </span> 29.6G <span class="number"> 0 </span>lvm   /home</span><br><span class="line">sdb                                             8:16  <span class="number"> 0 </span>931.5G <span class="number"> 0 </span>disk  </span><br><span class="line">├─sdb1                                          8:17  <span class="number"> 0 </span>  529M <span class="number"> 0 </span>part  </span><br><span class="line">├─sdb2                                          8:18  <span class="number"> 0 </span>  100M <span class="number"> 0 </span>part  </span><br><span class="line">├─sdb3                                          8:19  <span class="number"> 0 </span>   16M <span class="number"> 0 </span>part  </span><br><span class="line">├─sdb4                                          8:20  <span class="number"> 0 </span>130.1G <span class="number"> 0 </span>part  </span><br><span class="line">├─sdb5                                          8:21  <span class="number"> 0 </span>214.9G <span class="number"> 0 </span>part  </span><br><span class="line">├─sdb6                                          8:22  <span class="number"> 0 </span>  293G <span class="number"> 0 </span>part  </span><br><span class="line">└─sdb7                                          8:23  <span class="number"> 0 </span>  293G <span class="number"> 0 </span>part  </span><br><span class="line">sdc                                             8:32  <span class="number"> 1 </span> 14.6G <span class="number"> 0 </span>disk  </span><br><span class="line">└─sdc1                                          8:33  <span class="number"> 1 </span> 14.6G <span class="number"> 0 </span>part </span><br></pre></td></tr></table></figure><p><code>fdisk -l</code></p><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Disk /dev/sdb: 1000.2 GB,<span class="number"> 1000204886016 </span>bytes,<span class="number"> 1953525168 </span>sectors</span><br><span class="line">Units = sectors of<span class="number"> 1 </span>*<span class="number"> 512 </span>=<span class="number"> 512 </span>bytes</span><br><span class="line">Sector size (logical/physical):<span class="number"> 512 </span>bytes /<span class="number"> 4096 </span>bytes</span><br><span class="line">I/O size (minimum/optimal):<span class="number"> 4096 </span>bytes /<span class="number"> 4096 </span>bytes</span><br><span class="line">Disk label type: dos</span><br><span class="line">Disk identifier: 0x56c6d4e4</span><br><span class="line"></span><br><span class="line">   Device Boot      Start         End      Blocks   Id  System</span><br><span class="line">/dev/sdb1              <span class="number"> 1 </span><span class="number"> 4294967295 </span> 2147483647+  ee  GPT</span><br><span class="line">Partition<span class="number"> 1 </span>does not start on physical sector boundary.</span><br></pre></td></tr></table></figure><h3 id="创建分区"><a href="#创建分区" class="headerlink" title="创建分区"></a>创建分区</h3><p>需要重新创建分区，把原先的分区重新分配</p><figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"># parted /dev/sdb</span></span><br><span class="line">(parted) mktable gpt</span><br><span class="line">(parted) mkpart <span class="class"><span class="keyword">data</span> 1024KiB -1</span></span><br><span class="line">(parted print)</span><br></pre></td></tr></table></figure><p>parted之后的参数是设备名。mkpart命令的三个参数分别是分区名（随便起），开始地址，结束地址-1表示至结尾，前面留出的空间可能是用于存放分区信息，不留的时候会有警告。print查看分区结果</p><h3 id="格式化分区"><a href="#格式化分区" class="headerlink" title="格式化分区"></a>格式化分区</h3><p>mkfs.ext4 &#x2F;dev&#x2F;sdb1</p><p>或</p><p>mkfs.xfs &#x2F;dev&#x2F;sdb1</p><h3 id="设置开机挂载"><a href="#设置开机挂载" class="headerlink" title="设置开机挂载"></a>设置开机挂载</h3><p>mkdir &#x2F;data<br>mount &#x2F;dev&#x2F;sdb1 &#x2F;data</p><p>修改&#x2F;etc&#x2F;fstab文件，在末尾加上一行：</p><p>&#x2F;dev&#x2F;sdb1               &#x2F;data                   xfs    defaults        0 0</p><h2 id="迁移mysql数据库"><a href="#迁移mysql数据库" class="headerlink" title="迁移mysql数据库"></a>迁移mysql数据库</h2><p>先关闭mysql</p><p><code>/etc/init.d/mariadb stop</code></p><p>创建文件夹</p><p><code>mkdir /data/mysql/</code></p><p>复制<code>datadir</code>到新文件夹中</p><p>cp -a &#x2F;usr&#x2F;local&#x2F;mariadb&#x2F;var &#x2F;data&#x2F;mysql&#x2F;</p><p>备份原数据目录 </p><p><code>mv var var.bak</code></p><p>添加软链接</p><p><code>ln -s /data/mysql/var/ /usr/local/mariadb/</code></p><p>重启mysql即可</p><p><code>/etc/init.d/mariadb start</code></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;lnmp centos下mysql迁移数据目录到新硬盘&lt;/p&gt;
&lt;h2 id=&quot;centos-硬盘分区&quot;&gt;&lt;a href=&quot;#centos-硬盘分区&quot; class=&quot;headerlink&quot; title=&quot;centos 硬盘分区&quot;&gt;&lt;/a&gt;centos 硬盘分区&lt;/h2&gt;&lt;p</summary>
      
    
    
    
    <category term="技术" scheme="https://leadscloud.github.io/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
    <category term="centos" scheme="https://leadscloud.github.io/tags/centos/"/>
    
    <category term="lnmp" scheme="https://leadscloud.github.io/tags/lnmp/"/>
    
    <category term="mysql" scheme="https://leadscloud.github.io/tags/mysql/"/>
    
  </entry>
  
  <entry>
    <title>Inode limit, how to increase inode limit on block storage volume?</title>
    <link href="https://leadscloud.github.io/20201217/inode-limit-how-to-increase-inode-limit-on-block-storage-volume/"/>
    <id>https://leadscloud.github.io/20201217/inode-limit-how-to-increase-inode-limit-on-block-storage-volume/</id>
    <published>2020-12-17T05:15:00.000Z</published>
    <updated>2025-04-10T04:42:07.138Z</updated>
    
    <content type="html"><![CDATA[<p><code>df -h</code> 查看磁盘还有空间，但无法创建任何文件，提示磁盘空间已满(<code>No space left on device</code>)。</p><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root<span class="variable">@centos</span>-fra ~]<span class="comment"># df -h</span></span><br><span class="line">Filesystem      Size  Used Avail Use% Mounted on</span><br><span class="line">devtmpfs        <span class="number">1.9</span>G     <span class="number">0</span>  <span class="number">1.9</span>G   <span class="number">0</span>% <span class="regexp">/dev</span></span><br><span class="line"><span class="regexp">tmpfs           1.9G     0  1.9G   0% /dev</span><span class="regexp">/shm</span></span><br><span class="line"><span class="regexp">tmpfs           1.9G   17M  1.9G   1% /run</span></span><br><span class="line">tmpfs           <span class="number">1.9</span>G     <span class="number">0</span>  <span class="number">1.9</span>G   <span class="number">0</span>% <span class="regexp">/sys/fs</span><span class="regexp">/cgroup</span></span><br><span class="line"><span class="regexp">/dev</span><span class="regexp">/vda1        80G   73G  7.1G  92% /</span></span><br><span class="line">tmpfs           <span class="number">379</span>M     <span class="number">0</span>  <span class="number">379</span>M   <span class="number">0</span>% <span class="regexp">/run/user</span><span class="regexp">/0</span></span><br><span class="line"><span class="regexp">/dev</span><span class="regexp">/sda        100G   26G   69G  28% /mnt</span><span class="regexp">/volume_fra1_01</span></span><br></pre></td></tr></table></figure><p>最终发现下面的解决办法。</p><p>用 <code>df -i</code> 查看下索引节点(inode),会发现已经用满(IUsed&#x3D;100%)。<br>这会导致无法创建文件和目录，并且提示 <code>No space left on device</code>。</p><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[root@centos-fra ~]<span class="comment"># df -i</span></span><br><span class="line">Filesystem       Inodes   IUsed    IFree IUse% Mounted on</span><br><span class="line">devtmpfs        <span class="number"> 479052 </span>   <span class="number"> 312 </span> <span class="number"> 478740 </span>   1% /dev</span><br><span class="line">tmpfs           <span class="number"> 485037 </span>     <span class="number"> 1 </span> <span class="number"> 485036 </span>   1% /dev/shm</span><br><span class="line">tmpfs           <span class="number"> 485037 </span>   <span class="number"> 464 </span> <span class="number"> 484573 </span>   1% /run</span><br><span class="line">tmpfs           <span class="number"> 485037 </span>    <span class="number"> 16 </span> <span class="number"> 485021 </span>   1% /sys/fs/cgroup</span><br><span class="line">/dev/vda1     <span class="number"> 22168424 </span>6377093<span class="number"> 15791331 </span>  29% /</span><br><span class="line">tmpfs           <span class="number"> 485037 </span>     <span class="number"> 1 </span> <span class="number"> 485036 </span>   1% /run/user/0</span><br><span class="line">/dev/sda       <span class="number"> 3276800 </span>3276800       <span class="number"> 0 </span> 100% /mnt/volume_fra1_01</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="原因"><a href="#原因" class="headerlink" title="原因"></a>原因</h3><p>cache目录中存在数量非常多的小字节缓存文件，占用的Block不多，但是占用了大量的inode。</p><p>linux里每个文件都有些元信息像创建时间，文件大小，文件名啊之类的，这些元信息就存在inode了。这样如果小文件过多的话，可能磁盘没满但inode空间已分配完，这时磁盘就跟满了一样无法写入.</p><h3 id="解决办法"><a href="#解决办法" class="headerlink" title="解决办法"></a>解决办法</h3><p>挂载之前 使用下面命令增大inode数量，如果已经挂载，需要先卸载。<br>但执行下面的命令后，磁盘相当于重新格式化，之前的数据就消失了。</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkfs.ext4 -N <span class="number">20000000</span> <span class="regexp">/dev/</span>path<span class="regexp">/to/</span>volume</span><br></pre></td></tr></table></figure><p>还有一个解决办法：</p><p>用软连接将空闲分区&#x2F;home&#x2F;wwwroot&#x2F;中的newcache目录连接到&#x2F;mnt&#x2F;volume_fra1_01&#x2F;.cache，使用&#x2F;home分区的inode来缓解&#x2F;mnt分区inode不足的问题：</p><h3 id="参考文章"><a href="#参考文章" class="headerlink" title="参考文章"></a>参考文章</h3><ul><li><a href="https://www.digitalocean.com/community/questions/inode-limit-how-to-increase-inode-limit-on-block-storage-volume">https://www.digitalocean.com/community/questions/inode-limit-how-to-increase-inode-limit-on-block-storage-volume</a></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;&lt;code&gt;df -h&lt;/code&gt; 查看磁盘还有空间，但无法创建任何文件，提示磁盘空间已满(&lt;code&gt;No space left on device&lt;/code&gt;)。&lt;/p&gt;
&lt;figure class=&quot;highlight crystal&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;t</summary>
      
    
    
    
    <category term="Linux" scheme="https://leadscloud.github.io/categories/Linux/"/>
    
    
    <category term="Linux" scheme="https://leadscloud.github.io/tags/Linux/"/>
    
    <category term="Inode" scheme="https://leadscloud.github.io/tags/Inode/"/>
    
  </entry>
  
  <entry>
    <title>DigitalOcean的浮动IP使用</title>
    <link href="https://leadscloud.github.io/20201120/how-to-use-floating-ip-on-digitalocean/"/>
    <id>https://leadscloud.github.io/20201120/how-to-use-floating-ip-on-digitalocean/</id>
    <published>2020-11-20T09:59:00.000Z</published>
    <updated>2025-04-10T04:42:07.137Z</updated>
    
    <content type="html"><![CDATA[<p>DigitalOcean浮动IP是可以分配给您的某个Droplet的可公开访问的静态IP地址.</p><p>由于工作需要，需要给VPS绑定一个新的IP，并且要求请求特定IP时，使用新IP的接口。</p><h3 id="使用方法："><a href="#使用方法：" class="headerlink" title="使用方法："></a>使用方法：</h3><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看下你的浮云IP是设置成功</span></span><br><span class="line">curl http:<span class="regexp">//</span><span class="number">169.254</span>.<span class="number">169.254</span><span class="regexp">/metadata/</span>v1<span class="regexp">/floating_ip/i</span>pv4/active</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看浮云IP对应的网关</span></span><br><span class="line">curl http:<span class="regexp">//</span><span class="number">169.254</span>.<span class="number">169.254</span><span class="regexp">/metadata/</span>v1<span class="regexp">/interfaces/</span>public<span class="regexp">/0/</span>anchor_ipv4/gateway</span><br></pre></td></tr></table></figure><p>得到网关地址为 <code>10.13.0.1</code></p><p>在路由中添加新路由</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">ip</span> route add <span class="number">10.0.1.3</span> via <span class="number">10.13.0.1</span> dev eth0</span><br></pre></td></tr></table></figure><p>这样访问10.0.1.3时，就会使用新ip的网关口请求了。</p><h3 id="参考文章："><a href="#参考文章：" class="headerlink" title="参考文章："></a>参考文章：</h3><ul><li><a href="https://www.digitalocean.com/community/questions/send-outbound-traffic-over-floating-ip">https://www.digitalocean.com/community/questions/send-outbound-traffic-over-floating-ip</a></li><li><a href="https://www.digitalocean.com/docs/networking/floating-ips/">https://www.digitalocean.com/docs/networking/floating-ips/</a></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;DigitalOcean浮动IP是可以分配给您的某个Droplet的可公开访问的静态IP地址.&lt;/p&gt;
&lt;p&gt;由于工作需要，需要给VPS绑定一个新的IP，并且要求请求特定IP时，使用新IP的接口。&lt;/p&gt;
&lt;h3 id=&quot;使用方法：&quot;&gt;&lt;a href=&quot;#使用方法：&quot; cl</summary>
      
    
    
    
    <category term="技术" scheme="https://leadscloud.github.io/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
    <category term="Ubuntu" scheme="https://leadscloud.github.io/tags/Ubuntu/"/>
    
    <category term="DigitalOcean" scheme="https://leadscloud.github.io/tags/DigitalOcean/"/>
    
  </entry>
  
  <entry>
    <title>Linux下根据日期删除旧的文件</title>
    <link href="https://leadscloud.github.io/20201027/linux-delete-files-older-x-days/"/>
    <id>https://leadscloud.github.io/20201027/linux-delete-files-older-x-days/</id>
    <published>2020-10-27T05:09:12.000Z</published>
    <updated>2025-04-10T04:42:07.139Z</updated>
    
    <content type="html"><![CDATA[<h2 id="删除30天前的文件"><a href="#删除30天前的文件" class="headerlink" title="删除30天前的文件"></a>删除30天前的文件</h2><p>你可以使用find命令搜索X天前的文件，前根据需要删除它</p><p>先列出 <code>/home/wwwroot/db</code> 下面30天前的文件</p><figure class="highlight excel"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">find</span> /home/wwwroot/<span class="built_in">db</span> -<span class="built_in">type</span> f -mtime +<span class="number">30</span></span><br></pre></td></tr></table></figure><p>检查列出的文件列表，如果没有问题，使用下面的命令删除它</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find /opt/backup -<span class="built_in">type</span> f -mtime +30 -<span class="built_in">exec</span> <span class="built_in">rm</span> -f &#123;&#125; \; </span><br></pre></td></tr></table></figure><h2 id="根据文件后缀删除文件"><a href="#根据文件后缀删除文件" class="headerlink" title="根据文件后缀删除文件"></a>根据文件后缀删除文件</h2><p>你也可以增加过滤条件，只删除某一类型的文件。</p><p>比如删除<code>.log</code>后缀的30天前的日志文件</p><figure class="highlight excel"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">find</span> /<span class="built_in">var</span>/<span class="built_in">log</span> -name <span class="string">&quot;*.log&quot;</span> -<span class="built_in">type</span> f -mtime +<span class="number">30</span> </span><br></pre></td></tr></table></figure><p>同样，检查下列出的日志是否正确，然后再使用下面命令删除它</p><figure class="highlight sqf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">find</span> /var/<span class="built_in">log</span> -<span class="built_in">name</span> <span class="string">&quot;*.log&quot;</span> -<span class="built_in">type</span> f -mtime +<span class="number">30</span> -<span class="built_in">exec</span> rm -f &#123;&#125; \; </span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;删除30天前的文件&quot;&gt;&lt;a href=&quot;#删除30天前的文件&quot; class=&quot;headerlink&quot; title=&quot;删除30天前的文件&quot;&gt;&lt;/a&gt;删除30天前的文件&lt;/h2&gt;&lt;p&gt;你可以使用find命令搜索X天前的文件，前根据需要删除它&lt;/p&gt;
&lt;p&gt;先列出 &lt;c</summary>
      
    
    
    
    <category term="技术" scheme="https://leadscloud.github.io/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
    <category term="linux" scheme="https://leadscloud.github.io/tags/linux/"/>
    
  </entry>
  
  <entry>
    <title>Catalina 10.15 外接显示器后睡眠唤醒经常死机</title>
    <link href="https://leadscloud.github.io/20201013/kernal-panics-causing-restarts-in-use-extral-monitor/"/>
    <id>https://leadscloud.github.io/20201013/kernal-panics-causing-restarts-in-use-extral-monitor/</id>
    <published>2020-10-13T01:18:28.000Z</published>
    <updated>2025-04-10T04:42:07.139Z</updated>
    
    <content type="html"><![CDATA[<p>这是一个MacOS的bug，发生的情况非常普遍。</p><p>一个可能的解决方案</p><p><code>kextstat | grep -v com.apple</code></p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">Index</span> Refs Address Size Wired Name (Version) UUID &lt;Linked Against&gt;</span><br><span class="line"><span class="attribute">116</span> <span class="number">0</span> <span class="number">0</span>xffffff7f83ee4000 <span class="number">0</span>x42000 <span class="number">0</span>x42000 com.paragon-software.filesystems.ntfs (<span class="number">66</span>.<span class="number">5</span>.<span class="number">15</span>) <span class="number">43</span>B8E60C-<span class="number">1</span>D4C-<span class="number">37</span>A1-A831-<span class="number">0</span>ECF23B29456 &lt;<span class="number">8</span> <span class="number">6</span> <span class="number">5</span> <span class="number">1</span>&gt;</span><br></pre></td></tr></table></figure><p>卸载它</p><p><code>sudo kextunload -b com.paragon-software.filesystems.ntfs</code></p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">kextstat | grep -v com.apple</span><br><span class="line"><span class="keyword">Index</span> Refs Address Size Wired <span class="type">Name</span> (<span class="keyword">Version</span>) <span class="type">UUID</span> &lt;Linked Against&gt;</span><br></pre></td></tr></table></figure><ul><li><a href="https://www.reddit.com/r/MacOS/comments/dr1b0v/kernal_panics_causing_restarts_in_sleep_mode_in/">https://www.reddit.com/r/MacOS/comments/dr1b0v/kernal_panics_causing_restarts_in_sleep_mode_in/</a></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;这是一个MacOS的bug，发生的情况非常普遍。&lt;/p&gt;
&lt;p&gt;一个可能的解决方案&lt;/p&gt;
&lt;p&gt;&lt;code&gt;kextstat | grep -v com.apple&lt;/code&gt;&lt;/p&gt;
&lt;figure class=&quot;highlight apache&quot;&gt;&lt;table&gt;&lt;t</summary>
      
    
    
    
    <category term="技术" scheme="https://leadscloud.github.io/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
    <category term="MacOS" scheme="https://leadscloud.github.io/tags/MacOS/"/>
    
  </entry>
  
  <entry>
    <title>Ubuntu 18.04下修改DNS</title>
    <link href="https://leadscloud.github.io/20200904/set-dns-ubuntu-18-04/"/>
    <id>https://leadscloud.github.io/20200904/set-dns-ubuntu-18-04/</id>
    <published>2020-09-04T03:42:15.000Z</published>
    <updated>2025-04-10T04:42:07.143Z</updated>
    
    <content type="html"><![CDATA[<p>通过修改文件 <code>/etc/resolv.conf</code> 就可以修改dns</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Use Google&#x27;s public DNS servers.</span></span><br><span class="line"><span class="attribute">nameserver</span> <span class="number">8.8.4.4</span></span><br><span class="line">nameserver <span class="number">8.8.8.8</span></span><br></pre></td></tr></table></figure><p>但是以上方法只是临时有效，服务器重启后就恢复原样了，还是变成下面这样</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">nameserver</span> <span class="number">127.0.0.53</span></span><br><span class="line">search Home</span><br></pre></td></tr></table></figure><p>怎么样才可以永久修改呢？</p><ol><li>安装 resolvconf .</li></ol><p><code>sudo apt install resolvconf</code></p><ol start="2"><li>编辑 <code>/etc/resolvconf/resolv.conf.d/head</code> 添加以下内容:</li></ol><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Make edits to /etc/resolvconf/resolv.conf.d/head.</span></span><br><span class="line"><span class="attribute">nameserver</span> <span class="number">8.8.4.4</span></span><br><span class="line">nameserver <span class="number">8.8.8.8</span></span><br><span class="line">Restart the resolvconf service.</span><br></pre></td></tr></table></figure><ol start="3"><li>重启服务</li></ol><p><code>sudo service resolvconf restart</code></p><h2 id="Ubuntu-18-04-下面-修改ip及dns使用netplan"><a href="#Ubuntu-18-04-下面-修改ip及dns使用netplan" class="headerlink" title="Ubuntu 18.04 下面 修改ip及dns使用netplan"></a>Ubuntu 18.04 下面 修改ip及dns使用netplan</h2><h3 id="显示ip信息"><a href="#显示ip信息" class="headerlink" title="显示ip信息"></a>显示ip信息</h3><p><code>ip addr show</code></p><h3 id="显示路由信息"><a href="#显示路由信息" class="headerlink" title="显示路由信息"></a>显示路由信息</h3><p><code>ip route show</code></p><h3 id="编辑网络信息"><a href="#编辑网络信息" class="headerlink" title="编辑网络信息"></a>编辑网络信息</h3><p><code>vi /etc/netplan/*.yaml</code></p><figure class="highlight nix"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="params">network:</span></span><br><span class="line">  <span class="params">ethernets:</span></span><br><span class="line">      <span class="params">eno1:</span></span><br><span class="line">          <span class="params">addresses:</span> [<span class="number">192.168</span>.<span class="number">1.13</span><span class="operator">/</span><span class="number">24</span>]</span><br><span class="line">          <span class="params">gateway4:</span> <span class="number">192.168</span>.<span class="number">1.1</span></span><br><span class="line">          <span class="params">dhcp4:</span> <span class="literal">true</span></span><br><span class="line">          <span class="params">optional:</span> <span class="literal">true</span></span><br><span class="line">          <span class="params">nameservers:</span></span><br><span class="line">              <span class="params">addresses:</span> [<span class="number">8.8</span>.<span class="number">8.8</span>,<span class="number">8.8</span>.<span class="number">4.4</span>]</span><br><span class="line">  <span class="params">version:</span> <span class="number">2</span></span><br></pre></td></tr></table></figure><h3 id="应用配置"><a href="#应用配置" class="headerlink" title="应用配置:"></a>应用配置:</h3><p><code>netplan apply</code></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;通过修改文件 &lt;code&gt;/etc/resolv.conf&lt;/code&gt; 就可以修改dns&lt;/p&gt;
&lt;figure class=&quot;highlight nginx&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1</summary>
      
    
    
    
    <category term="技术" scheme="https://leadscloud.github.io/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
    <category term="Ubuntu" scheme="https://leadscloud.github.io/tags/Ubuntu/"/>
    
    <category term="Linux" scheme="https://leadscloud.github.io/tags/Linux/"/>
    
  </entry>
  
  <entry>
    <title>LNMP下解决Can’t connect to MySQL server问题</title>
    <link href="https://leadscloud.github.io/20200831/can-not-connect-remote-mysql/"/>
    <id>https://leadscloud.github.io/20200831/can-not-connect-remote-mysql/</id>
    <published>2020-08-31T02:40:00.000Z</published>
    <updated>2025-04-10T04:42:07.134Z</updated>
    
    <content type="html"><![CDATA[<p>错误详情，lnmp下无法远程连接mysql</p><p><code>ERROR 2003 (HY000): Can&#39;t connect to MySQL server on &#39;192.168.1.49&#39; (60)</code></p><p>如果设置好mysql的远程连接后，仍然出现上面的问题一般是因为防火墙规则的问题。</p><h3 id="查看iptables规则"><a href="#查看iptables规则" class="headerlink" title="查看iptables规则"></a>查看iptables规则</h3><p><code>sudo iptables -L</code></p><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">Chain INPUT (policy <span class="keyword">ACCEPT</span>)</span><br><span class="line">target     prot opt source               destination</span><br><span class="line"><span class="keyword">ACCEPT</span>     <span class="keyword">all</span>  <span class="comment">--  anywhere             anywhere</span></span><br><span class="line"><span class="keyword">ACCEPT</span>     <span class="keyword">all</span>  <span class="comment">--  anywhere             anywhere             state RELATED,ESTABLISHED</span></span><br><span class="line"><span class="keyword">ACCEPT</span>     tcp  <span class="comment">--  anywhere             anywhere             tcp dpt:http</span></span><br><span class="line"><span class="keyword">ACCEPT</span>     tcp  <span class="comment">--  localhost            anywhere             tcp dpt:mysql</span></span><br><span class="line">DROP       tcp  <span class="comment">--  anywhere             anywhere             tcp dpt:mysql</span></span><br><span class="line"><span class="keyword">ACCEPT</span>     tcp  <span class="comment">--  anywhere             anywhere             tcp dpt:mysql</span></span><br><span class="line"><span class="keyword">ACCEPT</span>     tcp  <span class="comment">--  192.168.1.0/24       anywhere             tcp dpt:mysql</span></span><br><span class="line"></span><br><span class="line">Chain FORWARD (policy <span class="keyword">ACCEPT</span>)</span><br><span class="line">target     prot opt source               destination</span><br><span class="line">DOCKER     <span class="keyword">all</span>  <span class="comment">--  anywhere             anywhere</span></span><br><span class="line"><span class="keyword">ACCEPT</span>     <span class="keyword">all</span>  <span class="comment">--  anywhere             anywhere             ctstate RELATED,ESTABLISHED</span></span><br><span class="line"><span class="keyword">ACCEPT</span>     <span class="keyword">all</span>  <span class="comment">--  anywhere             anywhere</span></span><br><span class="line"><span class="keyword">ACCEPT</span>     <span class="keyword">all</span>  <span class="comment">--  anywhere             anywhere</span></span><br><span class="line"></span><br><span class="line">Chain OUTPUT (policy <span class="keyword">ACCEPT</span>)</span><br><span class="line">target     prot opt source               destination</span><br><span class="line"></span><br><span class="line">Chain DOCKER (<span class="number">1</span> references)</span><br><span class="line">target     prot opt source               destination</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>注意上面多了一条</p><p><code>DROP       tcp  --  anywhere             anywhere             tcp dpt:mysql</code></p><p>mysql的远程连接被禁用了</p><h3 id="使用下面命令显示规则的序号"><a href="#使用下面命令显示规则的序号" class="headerlink" title="使用下面命令显示规则的序号"></a>使用下面命令显示规则的序号</h3><p><code>sudo iptables -L -n --line-number</code></p><h3 id="使用下面命令可以删除相应的规则"><a href="#使用下面命令可以删除相应的规则" class="headerlink" title="使用下面命令可以删除相应的规则"></a>使用下面命令可以删除相应的规则</h3><p><code>sudo optables -D INPUT 6</code></p><p>之后mysql连接就没问题了</p><p>下次重启规则还是会生效的，使用下面命令永久保存规则 </p><p><code>sudo iptables-save</code></p><p>上面的保存还是不行，使用下面的命令永久保存。</p><p>如果没有安装<code>iptables-persistent</code>，先安装它</p><p><code>sudo apt-get install iptables-persistent</code></p><p>保存命令：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> netfilter-persistent save</span><br><span class="line"><span class="built_in">sudo</span> netfilter-persistent reload</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;错误详情，lnmp下无法远程连接mysql&lt;/p&gt;
&lt;p&gt;&lt;code&gt;ERROR 2003 (HY000): Can&amp;#39;t connect to MySQL server on &amp;#39;192.168.1.49&amp;#39; (60)&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;如果设</summary>
      
    
    
    
    <category term="技术" scheme="https://leadscloud.github.io/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
    <category term="MySQL" scheme="https://leadscloud.github.io/tags/MySQL/"/>
    
    <category term="Ubuntu" scheme="https://leadscloud.github.io/tags/Ubuntu/"/>
    
  </entry>
  
  <entry>
    <title>修复Ubuntu18.04 Cloud-init导致卡在login界面</title>
    <link href="https://leadscloud.github.io/20200723/ubuntu18.04-fix-login-error/"/>
    <id>https://leadscloud.github.io/20200723/ubuntu18.04-fix-login-error/</id>
    <published>2020-07-24T02:31:00.000Z</published>
    <updated>2025-04-10T04:42:07.144Z</updated>
    
    <content type="html"><![CDATA[<p>开机后会一直卡在这个界面</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">Cloud</span>-init v. <span class="number">18</span>.<span class="number">4</span>-<span class="number">0</span>ubuntu1~<span class="number">18</span>.<span class="number">04</span>.<span class="number">1</span> running &#x27;modules:config&#x27; at Fri, <span class="number">24</span> Jul <span class="number">2020</span> </span><br></pre></td></tr></table></figure><h2 id="single模式进入ubuntu"><a href="#single模式进入ubuntu" class="headerlink" title="single模式进入ubuntu"></a>single模式进入ubuntu</h2><ol><li><p>开机时长按<kbd>Shift</kbd>键</p></li><li><p>出现grub选项，选中ubuntu</p></li><li><p>长按<kbd>e</kbd>键</p></li><li><p>找到类似下面的代码</p></li></ol><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">linux</span> /boot/vmlinuz-<span class="number">3</span>.<span class="number">2</span>.<span class="number">0</span>-<span class="number">24</span>-generic root=UUID=bc6f8146-<span class="number">1523</span>-<span class="number">46</span>a6-<span class="number">8</span>b<span class="punctuation">\</span></span><br><span class="line"><span class="punctuation"></span><span class="number">6</span>a-<span class="number">64</span>b819ccf2b7 ro  quiet splash</span><br><span class="line"><span class="attribute">initrd</span> /boot/initrd.img-<span class="number">3</span>.<span class="number">2</span>.<span class="number">0</span>-<span class="number">24</span>-generic</span><br></pre></td></tr></table></figure><ol start="5"><li><p>在 <code>ro  quiet splash</code> 这后面，加上 <code> single</code></p></li><li><p>按 <kbd>Ctrl</kbd>+<kbd>x</kbd>或<kbd>F0</kbd> 进入系统</p></li></ol><p>参考： <a href="https://askubuntu.com/questions/132965/how-do-i-boot-into-single-user-mode-from-grub">https://askubuntu.com/questions/132965/how-do-i-boot-into-single-user-mode-from-grub</a></p><h2 id="Ubuntu的网卡设置"><a href="#Ubuntu的网卡设置" class="headerlink" title="Ubuntu的网卡设置"></a>Ubuntu的网卡设置</h2><p>sudo vim &#x2F;etc&#x2F;netplan&#x2F;50-cloud-init.yam</p><figure class="highlight nix"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># This file is generated from information provided by</span></span><br><span class="line"><span class="comment"># the datasource.  Changes to it will not persist across an instance.</span></span><br><span class="line"><span class="comment"># To disable cloud-init&#x27;s network configuration capabilities, write a file</span></span><br><span class="line"><span class="comment"># /etc/cloud/cloud.cfg.d/99-disable-network-config.cfg with the following:</span></span><br><span class="line"><span class="comment"># network: &#123;config: disabled&#125;</span></span><br><span class="line"><span class="params">network:</span></span><br><span class="line">    <span class="params">ethernets:</span></span><br><span class="line">        <span class="params">enp3s0:</span></span><br><span class="line">            <span class="params">dhcp4:</span> <span class="literal">true</span></span><br><span class="line">    <span class="params">version:</span> <span class="number">2</span></span><br></pre></td></tr></table></figure><p>enp3s0 如果错了，改下，我的是因为硬盘换了另一台电脑，有变化，导致ip获取失败。</p><p><code>ifconfig -a</code> 可以显示所有网卡。</p><h3 id="设置静态ip"><a href="#设置静态ip" class="headerlink" title="设置静态ip"></a>设置静态ip</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">network:</span></span><br><span class="line">    <span class="attr">ethernets:</span></span><br><span class="line">        <span class="attr">enp3s0:</span>                  <span class="comment"># 配置的网卡名称</span></span><br><span class="line">            <span class="attr">dhcp4:</span> <span class="literal">no</span>           <span class="comment"># 关闭dhcp4</span></span><br><span class="line">            <span class="attr">dhcp6:</span> <span class="literal">no</span>           <span class="comment"># 关闭dhcp6</span></span><br><span class="line">            <span class="attr">addresses:</span> [<span class="number">192.168</span><span class="number">.0</span><span class="number">.120</span><span class="string">/24</span>]       <span class="comment"># 设置本机IP地址及掩码</span></span><br><span class="line">            <span class="attr">gateway4:</span> <span class="number">192.168</span><span class="number">.0</span><span class="number">.1</span>               <span class="comment"># 设置网关</span></span><br><span class="line">            <span class="attr">nameservers:</span></span><br><span class="line">                    <span class="attr">addresses:</span> [<span class="number">114.114</span><span class="number">.114</span><span class="number">.114</span>, <span class="number">8.8</span><span class="number">.8</span><span class="number">.8</span>]       <span class="comment"># 设置DNS</span></span><br><span class="line">    <span class="attr">version:</span> <span class="number">2</span></span><br></pre></td></tr></table></figure><p>配置完成后，保存并退出，执行 <code>netplan apply</code> 命令可以让配置直接生效</p><p><code>ifconfig -a</code> 可以看下是否成功</p><h3 id="重新启停以太网卡命令："><a href="#重新启停以太网卡命令：" class="headerlink" title="重新启停以太网卡命令："></a>重新启停以太网卡命令：</h3><p>ifconfig enp3s0 down</p><p>ifconfig enp3s0 up</p><p>参考： <a href="https://www.cnblogs.com/opsprobe/p/9979234.html">https://www.cnblogs.com/opsprobe/p/9979234.html</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;开机后会一直卡在这个界面&lt;/p&gt;
&lt;figure class=&quot;highlight apache&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=</summary>
      
    
    
    
    <category term="Linux" scheme="https://leadscloud.github.io/categories/Linux/"/>
    
    
    <category term="ubuntu" scheme="https://leadscloud.github.io/tags/ubuntu/"/>
    
  </entry>
  
  <entry>
    <title>在centos7上安装java和tomcat</title>
    <link href="https://leadscloud.github.io/20191029/install-java-and-tomcat-on-centos/"/>
    <id>https://leadscloud.github.io/20191029/install-java-and-tomcat-on-centos/</id>
    <published>2019-10-29T08:36:07.000Z</published>
    <updated>2025-04-10T04:42:07.138Z</updated>
    
    <content type="html"><![CDATA[<h2 id="安装Java11"><a href="#安装Java11" class="headerlink" title="安装Java11"></a>安装Java11</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install java-11-openjdk -y</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">java -version</span><br><span class="line"></span><br><span class="line">openjdk version &quot;11.0.5&quot; 2019-10-15 LTS</span><br><span class="line">OpenJDK Runtime Environment 18.9 (build 11.0.5+10-LTS)</span><br><span class="line">OpenJDK 64-Bit Server VM 18.9 (build 11.0.5+10-LTS, mixed mode, sharing)</span><br></pre></td></tr></table></figure><h2 id="安装Tomcat"><a href="#安装Tomcat" class="headerlink" title="安装Tomcat"></a>安装Tomcat</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">wget http://mirrors.tuna.tsinghua.edu.cn/apache/tomcat/tomcat-9/v9.0.27/bin/apache-tomcat-9.0.27.tar.gz</span><br><span class="line">tar xzf apache-tomcat-9.0.27.tar.gz</span><br><span class="line">mv apache-tomcat-9.0.27 /usr/local/tomcat9</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="启动tomcat"><a href="#启动tomcat" class="headerlink" title="启动tomcat"></a>启动tomcat</h3><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd <span class="regexp">/usr/</span>local<span class="regexp">/tomcat9/</span></span><br><span class="line">.<span class="regexp">/bin/</span>startup.sh</span><br></pre></td></tr></table></figure><p><strong>输出示例</strong></p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Using</span> <span class="type">CATALINA_BASE</span>:   <span class="regexp">/usr/</span>local<span class="operator">/</span>tomcat9</span><br><span class="line"><span class="type">Using</span> <span class="type">CATALINA_HOME</span>:   <span class="regexp">/usr/</span>local<span class="operator">/</span>tomcat9</span><br><span class="line"><span class="type">Using</span> <span class="type">CATALINA_TMPDIR</span>: <span class="regexp">/usr/</span>local<span class="regexp">/tomcat9/</span>temp</span><br><span class="line"><span class="type">Using</span> <span class="type">JRE_HOME</span>:        <span class="operator">/</span>usr</span><br><span class="line"><span class="type">Using</span> <span class="type">CLASSPATH</span>:       <span class="regexp">/usr/</span>local<span class="regexp">/tomcat9/</span>bin<span class="regexp">/bootstrap.jar:/</span>usr<span class="regexp">/local/</span>tomcat9<span class="regexp">/bin/</span>tomcat<span class="operator">-</span>juli.jar</span><br><span class="line"><span class="type">Tomcat</span> started.</span><br></pre></td></tr></table></figure><p>最后浏览器中输入 <code>http://localhost:8080 </code> 即可访问tomcat服务器了。</p><h3 id="war文件部署"><a href="#war文件部署" class="headerlink" title="war文件部署"></a>war文件部署</h3><h4 id="打war包"><a href="#打war包" class="headerlink" title="打war包"></a>打war包</h4><p>项目名称为<code>mygoodcache</code></p><p><code>eclipse</code>中项目上右键 <code>export--&gt;war file --&gt;Browse(指定打完的包存放路径)--&gt;finish mygood.war</code>包已经完成</p><h4 id="部署到tomcat"><a href="#部署到tomcat" class="headerlink" title="部署到tomcat"></a>部署到tomcat</h4><ul><li>找到tomcat的安装路径（如：<code>/usr/local/tomcat9/</code>）</li><li>webapps文件夹中如果有war包及<strong>文件夹</strong>都删除</li><li><code>/usr/local/tomcat9/webapps</code> 中上传新的war包</li><li><code>/usr/local/tomcat9/bin/startup.bat</code> 启动<code>tomcat</code></li></ul><h3 id="安装lnmp"><a href="#安装lnmp" class="headerlink" title="安装lnmp"></a>安装lnmp</h3><p><a href="https://lnmp.org/install.html">https://lnmp.org/install.html</a></p><h3 id="创建数据库"><a href="#创建数据库" class="headerlink" title="创建数据库"></a>创建数据库</h3><p><code>CREATE DATABASE crawler_pool CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;</code></p><h3 id="导入数据库"><a href="#导入数据库" class="headerlink" title="导入数据库"></a>导入数据库</h3><p><code>mysql -p crawler_pool &lt; mygood.sql</code></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;安装Java11&quot;&gt;&lt;a href=&quot;#安装Java11&quot; class=&quot;headerlink&quot; title=&quot;安装Java11&quot;&gt;&lt;/a&gt;安装Java11&lt;/h2&gt;&lt;figure class=&quot;highlight shell&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td cl</summary>
      
    
    
    
    <category term="技术" scheme="https://leadscloud.github.io/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
    <category term="linux" scheme="https://leadscloud.github.io/tags/linux/"/>
    
  </entry>
  
  <entry>
    <title>GoDaddy使用支付宝跨境汇款进行预充值</title>
    <link href="https://leadscloud.github.io/20191028/godaddy-recharge-with-zhifubao/"/>
    <id>https://leadscloud.github.io/20191028/godaddy-recharge-with-zhifubao/</id>
    <published>2019-10-28T05:14:00.000Z</published>
    <updated>2025-04-10T04:42:07.136Z</updated>
    
    <content type="html"><![CDATA[<p>Godaddy是流行的域名注册，虽然有些垃圾，但注册域名有时还是可以的。它有API可使用，以购买域名，大部分域名还是可以购买的。</p><p>但如果你账户中没有余额，是无法使用API购买的，这篇文章介绍如何向Godaddy中预充值。</p><blockquote><p>注意：使用Godaddy的API买域名是无法使用优惠券的。</p><p>API有时也会买域名失败，虽然大部分情况下会自动退款，但也有不退款的情况发生，对于我来说.co.za的域名发生过这种情况，你需要特别提醒godaddy给你处理。</p><p>这种充值方式是没有发票的，在Godaddy中账户中，你无法找到对应的billing记录。只会在Good As Gold中显示一个收据编号，然后一个充值提示，不会和买域名时一样，会生成一个详情的订单记录。</p></blockquote><h2 id="向GoDaddy中预存款，以使用API注册域名"><a href="#向GoDaddy中预存款，以使用API注册域名" class="headerlink" title="向GoDaddy中预存款，以使用API注册域名"></a>向GoDaddy中预存款，以使用API注册域名</h2><p>Godaddy中有一个Good As Gold付款方式。在 账户设定，付款方式中可以看到。 </p><p><a href="https://account.godaddy.com/payment-methods">https://account.godaddy.com/payment-methods</a> </p><p><img src="/wp-content/uploads/2019/image-20191028141636275.png" alt="image-20191028141636275"></p><p>你可以参考以下链接阅读Godaddy的帮助，通过向godaddy的银行账号转账，以达到预存款目的。这个账号，在下面的支付宝中会使用。</p><p>  <a href="https://sg.godaddy.com/zh/help/good-as-gold-727">https://sg.godaddy.com/zh/help/good-as-gold-727</a> </p><p><img src="/wp-content/uploads/2019/image-20191028140809338.png" alt="image-20191028140809338"></p><p><strong>收款银行名称</strong>：JPMorganChase Bank<br>**银行地址：**270 Park Avenue, New York, NY 10017<br><strong>账户名称</strong>：GoDaddy.com, LLC<br><strong>账号</strong>：580706823<br><strong>汇款路径号码</strong>：021000021<br><strong>ACH 汇款路径号码</strong>：124001545<br><strong>Swift 代码</strong>：CHASUS33<br><strong>参考：客户编号</strong> </p><h2 id="支付宝付款流程图"><a href="#支付宝付款流程图" class="headerlink" title="支付宝付款流程图"></a>支付宝付款流程图</h2><p>先在支付宝里搜索<strong>上银汇款</strong>，打开上银汇款，如下界面，最低100美元起步。</p><p>手续费是每次50，无论你汇多少，它都是按次收费的，所以单次可以多汇一点，会省点手续费。</p><blockquote><p>支付宝美元汇款，不支持信用卡，只能是银行卡或余额宝。</p></blockquote><p><img src="/wp-content/uploads/2019/image-20191028135048071.png" alt="image-20191028135048071"></p><p>我已经添加了联系人，如果你是第一次汇款，需要按godaddy的帮助说明，添加godaddy的银行账号</p><p><a href="https://sg.godaddy.com/zh/help/good-as-gold-727">https://sg.godaddy.com/zh/help/good-as-gold-727</a> </p><p><img src="/wp-content/uploads/2019/image-20191028135201586.png" alt="image-20191028135201586"></p><p>选择<strong>计算机网络服务费</strong></p><p><img src="/wp-content/uploads/2019/image-20191028135210797.png" alt="image-20191028135210797"></p><p>下面这一项，需要手动填写，并且要注意不要弄错，否则会失败。</p><p>交易对方名称：GoDaddy.com, LLC</p><p>具体购汇项目：域名购买</p><p>附言：这个是你的Godaddy账号 (Customer id)</p><p>登陆你的Godaddy账号，可以点击右上角你的头像，会看到Customer id</p><p>附言，只需要填写customer id，不要有其它的任何字符，否则会失败。</p><p><img src="/wp-content/uploads/2019/image-20191028135836822.png" alt="image-20191028135836822"></p><p><img src="/wp-content/uploads/2019/image-20191028135219882.png" alt="image-20191028135219882"></p><p><img src="/wp-content/uploads/2019/image-20191028135227517.png" alt="image-20191028135227517"></p><p><img src="/wp-content/uploads/2019/image-20191028135236330.png" alt="image-20191028135236330"></p><p><img src="/wp-content/uploads/2019/image-20191028135245963.png" alt="image-20191028135245963"></p><p><img src="/wp-content/uploads/2019/image-20191028135254666.png" alt="image-20191028135254666"></p><p><img src="/wp-content/uploads/2019/image-20191028135302802.png" alt="image-20191028135302802"></p><p>第一次充值后，需要5-7个工作日，但也可能2-3天就可以。</p><p>之后再充值2-3天就会到账，但一般不会超过7个工作日。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;Godaddy是流行的域名注册，虽然有些垃圾，但注册域名有时还是可以的。它有API可使用，以购买域名，大部分域名还是可以购买的。&lt;/p&gt;
&lt;p&gt;但如果你账户中没有余额，是无法使用API购买的，这篇文章介绍如何向Godaddy中预充值。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p</summary>
      
    
    
    
    <category term="技术" scheme="https://leadscloud.github.io/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
    <category term="godaddy" scheme="https://leadscloud.github.io/tags/godaddy/"/>
    
  </entry>
  
</feed>
